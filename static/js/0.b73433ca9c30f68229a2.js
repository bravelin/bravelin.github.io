webpackJsonp([0,18],{11:function(e,s,t){e.exports=t.p+"static/img/10.281ae33.png"},12:function(e,s,t){e.exports=t.p+"static/img/2.48fbdd3.png"},13:function(e,s,t){e.exports=t.p+"static/img/4.89486cf.png"},14:function(e,s,t){e.exports=t.p+"static/img/9.f85ceaa.png"},42:function(e,s){"use strict";e.exports={mounted:function(){this.$nextTick(function(){var e=document.querySelectorAll("code");if(e.length>0)for(var s=0;s<e.length;s++)hljs.highlightBlock(e[s])})}}},65:function(e,s,t){var n,a;n=t(42);var r=t(67);a=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(a=n=n.default),"function"==typeof a&&(a=a.options),a.render=r.render,a.staticRenderFns=r.staticRenderFns,e.exports=n},67:function(e,s,t){e.exports={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"page article"},[t("h2",{staticClass:"title"},[e._v("前端基础开发环境的配置")]),e._v(" "),e._m(0),e._v(" "),t("footer",[e._v("2016年05月15日")]),e._v(" "),t("comments")])},staticRenderFns:[function(){var e=this,s=e.$createElement,n=e._self._c||s;return n("div",{staticClass:"content"},[n("p",[e._v("以下安装和配置基于windows7 x64系统。")]),e._v(" "),n("h3",{staticClass:"title"},[e._v("工具软件的安装")]),e._v(" "),n("p",[n("strong",[e._v("1. 安装node.js")])]),e._v(" "),n("p",[e._v("下载地址："),n("a",{attrs:{href:"https://nodejs.org/en/"}},[e._v("https://nodejs.org/en/")]),e._v("，node -v 命令可以查看当前的版本：")]),e._v(" "),n("pre",{staticClass:"inner black"},[n("code",[e._v("$ node -v\nv6.9.5")])]),e._v(" "),n("p",[n("strong",[e._v("2. 安装ruby")])]),e._v(" "),n("p",[e._v("下载地址："),n("a",{attrs:{href:"https://rubyinstaller.org/downloads/"}},[e._v("https://rubyinstaller.org/downloads/")]),e._v("，访问很慢，可以从下面这两个地址下载：")]),e._v(" "),n("p",[n("a",{attrs:{href:"http://rj.baidu.com/soft/detail/22711.html?ald"}},[e._v("http://rj.baidu.com/soft/detail/22711.html?ald")])]),e._v(" "),n("p",[n("a",{attrs:{href:"http://download.csdn.net/download/ml065787/9640336"}},[e._v("http://download.csdn.net/download/ml065787/9640336")])]),e._v(" "),n("p",[e._v('安装的第二步，请勾选"Add Ruby executables to your PATH"：')]),e._v(" "),n("figure",{staticClass:"common"},[n("img",{staticStyle:{"max-width":"503px"},attrs:{src:t(12)}})]),e._v(" "),n("p",[e._v("ruby -v 命令可以查看当前的版本：")]),e._v(" "),n("pre",{staticClass:"inner black"},[n("code",[e._v("$ ruby -v\nruby 2.3.1p112 (2016-04-26 revision 54768) [x64-mingw32]")])]),e._v(" "),n("p",[n("strong",[e._v("3. 安装WebStorm或者Sublime")])]),e._v(" "),n("p",[e._v("WebStorm下载地址："),n("a",{attrs:{href:"http://www.jetbrains.com/webstorm/"}},[e._v("http://www.jetbrains.com/webstorm")])]),e._v(" "),n("p",[e._v("Sublime下载地址："),n("a",{attrs:{href:"http://www.sublimetext.com"}},[e._v("http://www.sublimetext.com")])]),e._v(" "),n("h3",{staticClass:"title"},[e._v("配置和修改")]),e._v(" "),n("p",[n("strong",[e._v("1. 更改Ruby的gem source")])]),e._v(" "),n("p",[e._v("参考文档地址："),n("a",{attrs:{href:"http://gems.ruby-china.org/"}},[e._v("http://gems.ruby-china.org/")])]),e._v(" "),n("p",[e._v("打开ruby命令行窗口：")]),e._v(" "),n("figure",{staticClass:"common"},[n("img",{staticStyle:{"max-width":"442px"},attrs:{src:t(13)}})]),e._v(" "),n("p",[e._v("执行以下命令：")]),e._v(" "),n("pre",{staticClass:"inner black"},[n("code",[e._v("$ gem sources --add https://gems.ruby-china.org/ --remove https://rubygems.org/")])]),e._v(" "),n("p",[e._v("如果失败则将https改为http：")]),e._v(" "),n("pre",{staticClass:"inner black"},[n("code",[e._v("$ gem sources --add http://gems.ruby-china.org/ --remove https://rubygems.org/")])]),e._v(" "),n("p",[e._v("gem source -l 命令查看配置是否生效：")]),e._v(" "),n("pre",{staticClass:"inner black"},[n("code",[e._v("gem sources -l\n***  CURRENT SOURCES  ***\nhttp://gems.ruby-china.org/")])]),e._v(" "),n("p",[e._v("更新gem（非必须）：gem update --system")]),e._v(" "),n("pre",{staticClass:"inner black"},[n("code",[e._v("gem -v\n2.5.1\ngem update --system")])]),e._v(" "),n("p",[n("strong",[e._v("2. 安装sass")])]),e._v(" "),n("p",[e._v("在ruby命令行窗口执行：gem install sass")]),e._v(" "),n("pre",{staticClass:"inner black"},[n("code",[e._v("gem install sass\nFetching: sass-3.4.23.gem<100%>\nSuccessfully installed sass-3.4.23")])]),e._v(" "),n("p",[e._v("命令 sass -v 可以查看sass的版本：")]),e._v(" "),n("pre",{staticClass:"inner black"},[n("code",[e._v("sass -v\nSass 3.4.23 (Selective Steve)")])]),e._v(" "),n("p",[n("strong",[e._v("3. 修改sass配置")])]),e._v(" "),n("p",[e._v('当sass编译含有中文字符的sass文件时会报"Invalid GBK character"，修改如下：')]),e._v(" "),n("p",[e._v("找到ruby的安装文件，进入以下目录（版本不一样路径也不一样，注意区分）")]),e._v(" "),n("p",[e._v("C:\\Ruby23-x64\\lib\\ruby\\gems\\2.3.0\\gems\\sass-3.4.23\\lib\\sass")]),e._v(" "),n("p",[e._v("打开engine.rb文件，在所有的require xxx之后增加下面这一行代码：")]),e._v(" "),n("p",[e._v("Encoding.default_external = Encoding.find('utf-8')")]),e._v(" "),n("p",[n("strong",[e._v("4. 淘宝npm镜像")])]),e._v(" "),n("p",[e._v("参考文档地址："),n("a",{attrs:{href:"http://npm.taobao.org/"}},[e._v("http://npm.taobao.org/")])]),e._v(" "),n("p",[e._v("打开node命令行窗口：")]),e._v(" "),n("figure",{staticClass:"common"},[n("img",{staticStyle:{"max-width":"410px"},attrs:{src:t(14)}})]),e._v(" "),n("p",[e._v("使用cnpm命令行工具代替npm：")]),e._v(" "),n("pre",{staticClass:"inner black"},[n("code",[e._v("$ npm install -g cnpm --registry=https://registry.npm.taobao.org")])]),e._v(" "),n("p",[e._v("以后安装模块，可以使用 cnpm install [name]")]),e._v(" "),n("p",[n("strong",[e._v("5. 全局安装node模块")])]),e._v(" "),n("p",[e._v("默认的node模块是安装在项目目录下的，但这会导致每个项目下都需要node_modules目录及很多node模块文件，可以将这些模块安装在全局。")]),e._v(" "),n("p",[e._v("在node.js的安装目录下新建两个文件夹：node_global和node_cache：")]),e._v(" "),n("p",[e._v("windows10操作系统对系统盘文件的操作有更严格的限制，可能会出现安装不了就全局node模块的问题，此时可以将这两个目录配置在其他磁盘。")]),e._v(" "),n("figure",{staticClass:"common"},[n("img",{staticStyle:{"max-width":"800px"},attrs:{src:t(11)}})]),e._v(" "),n("p",[e._v("打开cmd命令行窗口执行如下两条命令：")]),e._v(" "),n("pre",{staticClass:"inner black"},[n("code",[e._v("$ npm config set prefix 'C:\\Program Files\\nodejs\\node_global'\n$ npm config set cache 'C:\\Program Files\\nodejs\\node_cache'")])]),e._v(" "),n("p",[e._v("通过npm config get prefix 和 npm config get cache命令可以查看设置：")]),e._v(" "),n("pre",{staticClass:"inner black"},[n("code",[e._v("$ npm config get prefix\nC:\\Program Files\\nodejs\\node_global\n$ npm config get cache\nC:\\Program Files\\nodejs\\node_cache")])]),e._v(" "),n("p",[e._v("新增环境变量：NODE_PATH")]),e._v(" "),n("p",[e._v("值：C:\\Program Files\\nodejs\\node_global\\node_modules")]),e._v(" "),n("p",[e._v("在命令行窗口上执行以下命令，全局安装gulp")]),e._v(" "),n("pre",{staticClass:"inner black"},[n("code",[e._v("cnpm install gulp –g")])]),e._v(" "),n("p",[e._v("通常还需要全局安装的其他模块（执行命令类似gulp）：gulp-sass、gulp-mini-css、gulp-changed、gulp-uglify、gulp-clean、gulp-concat、gulp-rename、gulp-connect、gulp-rev、gulp-notify、run-sequence、gulp-rev-collector、gulp-base64")]),e._v(" "),n("p",[n("strong",[e._v("6. gulp-rev和gulp-rev-collector插件的修改")])]),e._v(" "),n("p",[e._v("参考文档："),n("a",{attrs:{href:"http://www.reqianduan.com/3015.html"}},[e._v("http://www.reqianduan.com/3015.html")])]),e._v(" "),n("p",[e._v("这两个gulp插件用于js、css等资源文件的版本号（依据文件内容生成hash值），以避免浏览器缓存导致代码修改了不生效的问题。")]),e._v(" "),n("p",[e._v("这两个插件默认是在文件名上增加hash值：")]),e._v(" "),n("pre",{staticClass:"inner black center"},[n("code",[e._v('"/css/style.css"  =>  "/css/style-1d87bebe.css"\n"/js/script.js"  =>  "/js/script-28dnamka.js"')])]),e._v(" "),n("p",[e._v("然而这种方式会导致积累很多文件，期望的替换方式是这样的：")]),e._v(" "),n("pre",{staticClass:"inner black center"},[n("code",[e._v('"/css/style.css"  =>  "/css/style.css?v=1d87bebe"\n"/js/script.js"  =>  "/js/script.js?v=28dnamka"')])]),e._v(" "),n("p",[e._v("要达此目的需要修改gulp-rev和gulp-rev-collector。（版本不同，代码行数可能不一样）")]),e._v(" "),n("p",[e._v("① 打开文件：{ node_globa }\\node_modules\\gulp-rev\\index.js")]),e._v(" "),n("p",[e._v("第144行：manifest[originalFile] = revisionedFile;")]),e._v(" "),n("p",[e._v("改为：manifest[originalFile] = originalFile + '?v=' + file.revHash;")]),e._v(" "),n("p",[e._v("② 打开文件：")]),e._v(" "),n("p",[e._v("{ node_globa }\\node_modules\\gulp-rev\\node_modules\\rev-path\\index.js")]),e._v(" "),n("p",[e._v("第10行：return filename + '-' + hash + ext;")]),e._v(" "),n("p",[e._v("改为：return filename + ext;")]),e._v(" "),n("p",[e._v("③ 打开文件：")]),e._v(" "),n("p",[e._v("{ node_globa }\\node_modules\\gulp-rev-collector\\index.js")]),e._v(" "),n("p",[e._v("第31行：path.basename(json[key]).replace(new RegExp( opts.revSuffix ), '' ) !== path.basename(key)")]),e._v(" "),n("p",[e._v("改为：path.basename(json[key]).split('?')[0] !==  path.basename(key)")]),e._v(" "),n("p",[e._v("{ node_globa }是设置的全局node模块安装目录，如：C:\\Program Files\\nodejs\\node_global。")])])}]}}});