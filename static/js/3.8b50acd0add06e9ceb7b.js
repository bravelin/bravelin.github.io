webpackJsonp([3],{A56t:function(t,n,e){(t.exports=e("UTlt")(!1)).push([t.i,"\n.scroll-num-wrap {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  height: 80px;\n  margin: 0 15px;\n  line-height: 80px;\n  text-align: center;\n}\n.scroll-num-wrap .scroll-number-item {\n    position: relative;\n    height: 100%;\n    width: 40px;\n    overflow: hidden;\n}\n.scroll-num-wrap .scroll-number-item > ul {\n      width: 100%;\n      -webkit-transform: translateY(0);\n              transform: translateY(0);\n      -webkit-transition: -webkit-transform 0.5s ease-out;\n      transition: -webkit-transform 0.5s ease-out;\n      transition: transform 0.5s ease-out;\n      transition: transform 0.5s ease-out, -webkit-transform 0.5s ease-out;\n}\n.scroll-num-wrap .scroll-number-item > ul > li {\n        list-style: none !important;\n        font-size: 60px;\n        color: #4d4d4d;\n        padding-left: 0 !important;\n        text-indent: 0 !important;\n        text-align: center;\n        line-height: 80px !important;\n}\n",""])},E4Ri:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("3ErM"),s={name:"ScrollNumberItem",data:function(){return{duration:.3,list:["0","1","2","3","4","5","6","7","8","9",","]}},watch:{index:function(t,n){this.duration=.3*(Math.abs(t-n)/3+1)}},props:{index:{type:Number,default:0}}},l={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"scroll-number-item"},[e("ul",{style:{transform:"translateY("+-80*t.index+"px)","transition-duration":t.duration+"s"}},t._l(t.list,function(n,r){return e("li",{key:r},[t._v(t._s(n))])}))])},staticRenderFns:[]},i={name:"ScrollNumber",components:{ScrollNumberItem:e("Z0/y")(s,l,!1,null,null,null).exports},data:function(){return{cursors:[]}},watch:{num:function(t,n){this.splitNum()}},props:{num:{type:Number,default:0}},created:function(){this.splitNum()},methods:{splitNum:function(){for(var t=this,n=(t.num+"").split(""),e=n.length-2;e>=0;e-=3)e>1&&n.splice(e-1,0,10);var r=n.map(function(t){return t-0<10?0:t});t.cursors=r;var s=n.map(function(t){return t-0});setTimeout(function(){t.cursors=s},30)}}},a={render:function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"scroll-num-wrap",style:{width:40*this.cursors.length+"px"}},this._l(this.cursors,function(t,e){return n("ScrollNumberItem",{key:e,attrs:{index:t}})}))},staticRenderFns:[]};var o=e("Z0/y")(i,a,!1,function(t){e("yRaD")},null,null).exports,c={extends:r.a,components:{ScrollNumber:o},data:function(){return{scrollData:{title:"",num:0,desc:""},scrollTimer:null,scrollCount:0,scrollDataList:[{title:"增加",num:4648,desc:"人"},{title:"到店率",num:95,desc:"%"},{title:"信息",num:8795,desc:"条"}]}},created:function(){this.startScrollData()},methods:{startScrollData:function(){var t=this,n=t.scrollData,e=t.scrollDataList;n.title=e[0].title,n.num=e[0].num,n.desc=e[0].desc;var r=0;t.scrollTimer=setInterval(function(){r=t.scrollCount++%3,n.title=e[r].title,n.num=e[r].num,n.desc=e[r].desc},3e3)}},beforeDestroy:function(){this.scrollTimer&&clearInterval(this.scrollTimer)}},u={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"page article"},[e("h2",{staticClass:"title"},[t._v("数字滚动效果的实现")]),t._v(" "),e("div",{staticClass:"content"},[e("h3",{staticClass:"title"},[t._v("效果")]),t._v(" "),e("div",{staticClass:"exp-container"},[t._v(t._s(t.scrollData.title)+" "),e("ScrollNumber",{attrs:{num:t.scrollData.num}}),t._v(t._s(t.scrollData.desc))],1),t._v(" "),t._m(0),t._v(" "),e("h3",{staticClass:"title"},[t._v("实现")]),t._v(" "),e("p",[t._v("将隐藏的元素显示出来，可以看到数字是这样滚动的：")]),t._v(" "),t._m(1),t._v(" "),e("p",[t._v("每一列都是0-9的数字再加一个逗号（逗号用于千位的分隔），通过translateY+transition移动到相应的位置，并通过在外层设置的overflow:hidden样式，隐藏当前不需要显示的数字。")]),t._v(" "),e("p",[t._v("定义组件ScrollNumber，其中的每一列又可以是一个ScrollNumberItem组件（列宽度40px）：")]),t._v(" "),t._m(2),t._v(" "),e("p",[t._v("ScrollNumber组件从外层接收一个num数字，首先要将数字拆分成字符串，并且每三位一个间隔。如486048，应拆分成'486,048'：")]),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),e("p",[t._v("初始每个位置上设置为0，间隔30ms之后再设置为真实的值，这是因为有变化才能看到数字在滚动的效果。")]),t._v(" "),e("p",[t._v("下面是ScrollNumberItem的实现，每个数字高度80px：")]),t._v(" "),t._m(5),t._v(" "),e("p",[t._v("其中data定义如下：")]),t._v(" "),t._m(6),t._v(" "),e("p",[t._v("从外层接收index属性，并监听index的变化，计算出transition的duration是多少：")]),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),e("h3",{staticClass:"title"},[t._v("使用")]),t._v(" "),e("p",[t._v("本文中的效果是这样实现的：")]),t._v(" "),t._m(9),t._v(" "),e("p",[t._v("data中定义如下状态：")]),t._v(" "),t._m(10),t._v(" "),e("p",[t._v("启动滚动定时器：")]),t._v(" "),t._m(11),t._v(" "),e("p",[t._v("在页面销毁之前记得将定时器清除：")]),t._v(" "),t._m(12)]),t._v(" "),e("footer",[t._v("2018年04月11日")]),t._v(" "),e("Comments"),t._v(" "),e("Catalog",{attrs:{catalog:t.catalog}}),t._v(" "),e("Preview",{attrs:{"is-show":t.showPreview,list:t.previewList,index:t.previewIndex},on:{"update:isShow":function(n){t.showPreview=n}}})],1)},staticRenderFns:[function(){var t=this.$createElement,n=this._self._c||t;return n("p",[this._v("应用于公司官网的真实效果："),n("a",{attrs:{href:"https://www.xiaomodo.com"}},[this._v("https://www.xiaomodo.com")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("figure",{staticClass:"common"},[n("img",{staticStyle:{"max-width":"820px",border:"1px solid #ccc"},attrs:{src:"http://800cx2.com1.z0.glb.clouddn.com/apicloud/5ed2510ca788d087abfbf36afe000e95.png"}})])},function(){var t=this.$createElement,n=this._self._c||t;return n("pre",[n("code",[this._v('<div class="scroll-num-wrap" :style="{ width: cursors.length * 40 + \'px\' }">\n    <ScrollNumberItem v-for="(v, index) in cursors" :index="v" :key="index"></ScrollNumberItem>\n</div>')])])},function(){var t=this.$createElement,n=this._self._c||t;return n("pre",[n("code",[this._v("props: {\n    num: {\n        type: Number,\n        default: 0\n    }\n}")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("pre",[n("code",[this._v("splitNum () {\n    const that = this\n    let cursors = (that.num + '').split('')\n    for (let i = cursors.length - 2; i >= 0; i = i - 3) { // 每三位增加间隔，数字10的索引代表逗号\n        if (i > 1) {\n            cursors.splice(i - 1, 0, 10)\n        }\n    }\n    let tempCursors = cursors.map(item => { // 初始每个位置上设置为0\n        if (item - 0 < 10) {\n            return 0\n        } else {\n            return item\n        }\n    })\n    that.cursors = tempCursors\n    let reallyCursors = cursors.map(item => item - 0) // 真实的索引\n    setTimeout(() => {\n        that.cursors = reallyCursors\n    }, 30)\n}")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("pre",[n("code",[this._v("<div class=\"scroll-number-item\">\n    <ul :style=\"{ transform: 'translateY(' + (index * -80 + 'px') + ')', 'transition-duration': duration + 's' }\">\n        <li v-for=\"(item, index) in list\" :key=\"index\">{ { item } }</li>\n    </ul>\n</div>")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("pre",[n("code",[this._v("data () {\n    return {\n        duration: 0.3,\n        list: ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', ',']\n    }\n}")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("pre",[n("code",[this._v("watch: {\n    index (newVal, oldVal) {\n        const that = this\n        that.duration = (Math.abs(newVal - oldVal) / 3 + 1) * 0.3\n    }\n}")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[this._v("源码："),n("a",{attrs:{href:"https://github.com/bravelin/bravelin.github.io/blob/master/source/src/components/ScrollNumber.vue"}},[this._v("https://github.com/bravelin/bravelin.github.io/blob/master/source/src/components/ScrollNumber.vue")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("pre",[n("code",[this._v("<div class=\"exp-container\">{ { scrollData.title } } <ScrollNumber :num = 'scrollData.num'></ScrollNumber>{ { scrollData.desc } }</div>")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("pre",[n("code",[this._v("scrollData: { // 当前的scroll信息\n    title: '',\n    num: 0,\n    desc: ''\n},\nscrollTimer: null, // 定时器\nscrollCount: 0, // 每变化一次+1，用于切换\nscrollDataList: [ // 数据源\n    { title: '增加', num: 486048, desc: '人' },\n    { title: '到店率', num: 95, desc: '%' },\n    { title: '信息', num: 875395, desc: '条' }\n]")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("pre",[n("code",[this._v("startScrollData () {\n    const that = this\n    const scrollData = that.scrollData\n    const scrollDataList = that.scrollDataList\n    // 初始为第一个\n    scrollData.title = scrollDataList[0].title\n    scrollData.num = scrollDataList[0].num\n    scrollData.desc = scrollDataList[0].desc\n    let index = 0\n    that.scrollTimer = setInterval(() => { // 定义定时器\n        index = (that.scrollCount ++) % 3 // 取一下个\n        scrollData.title = scrollDataList[index].title\n        scrollData.num = scrollDataList[index].num\n        scrollData.desc = scrollDataList[index].desc\n    }, 3000)\n}\n")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("pre",[n("code",[this._v("beforeDestroy () {\n    const that = this\n    if (that.scrollTimer) {\n        clearInterval(that.scrollTimer)\n    }\n}")])])}]};var m=e("Z0/y")(c,u,!1,function(t){e("N92l")},null,null);n.default=m.exports},MVHe:function(t,n,e){(t.exports=e("UTlt")(!1)).push([t.i,"\n.exp-container{\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    margin: 15px 20px;\n    padding: 20px 0;\n    background: #eee;\n    border-radius: 6px;\n}\n@media screen and (max-width: 530px){\n.exp-container{\n        margin-right: 0;\n        margin-left: 0;\n}\n}\n",""])},N92l:function(t,n,e){var r=e("MVHe");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);e("FIqI")("016ade0a",r,!0,{})},yRaD:function(t,n,e){var r=e("A56t");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);e("FIqI")("6e6336d4",r,!0,{})}});