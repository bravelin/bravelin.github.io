webpackJsonp([1],{"6jqa":function(t,e,i){(t.exports=i("UTlt")(!1)).push([t.i,"\n.exp[data-v-50e6d324]{\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n}\ncanvas[data-v-50e6d324]{\n    width: 300px;\n    height: 400px;\n    border: 1px solid #e0e0e0;\n    border-radius: 4px;\n}\n",""])},AA3o:function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},COrO:function(t,e,i){var n=i("6jqa");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("FIqI")("305d6766",n,!0,{})},KiKp:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("3ErM"),a=i("u3//"),s={paint:function(t,e){var i=e.createRadialGradient(t.left,t.top,0,t.left,t.top,t.radius);i.addColorStop(.3,t.innerColor),i.addColorStop(.5,t.middleColor),i.addColorStop(1,t.outerColor),e.save(),e.fillStyle=i,e.strokeStyle=t.strokeStyle,e.beginPath(),e.arc(t.left,t.top,t.radius,0,2*Math.PI,!1),e.fill(),e.stroke(),e.restore()}},o={extends:n.a,data:function(){return{ball:null,lobBalls:[],pendulum:null}},mounted:function(){var t=this;t.$nextTick(function(){t.startGravityForce(),t.startLob(),t.startPendulum()})},methods:{startGravityForce:function(){var t={execute:function(t,e,i){t.top+t.velocityY+t.radius>e.canvas.height&&(t.velocityY=0,t.top=0,t.lastTime=+new Date,t.elapseTime=0);var n=(i=i||+new Date)-t.lastTime,a=1e3/n;t.top+=t.velocityY/a,t.elapseTime+=n,t.velocityY=t.elapseTime/1e3*9.81*.01}};this.ball=new a.a({painter:s,behaviors:[t],left:150,top:20,velocityX:0,velocityY:0,lastTime:+new Date,elapseTime:0,radius:10,innerColor:"rgba(100,145,230,1)",middleColor:"rgba(100,145,230,0.7)",outerColor:"rgba(100,145,230,0.5)",strokeStyle:"blue"}),this.animateGravityForce()},animateGravityForce:function(t){var e=this.$refs.c1,i=e.getContext("2d");i.fillStyle="#ffffff",i.fillRect(0,0,e.width,e.height),this.ball.update(i),this.ball.paint(i),window.requestAnimationFrame(this.animateGravityForce)},startLob:function(){for(var t={execute:function(t,e,i){(t.top+t.velocityY>e.canvas.height||t.left+t.velocityX>e.canvas.width)&&(t.velocityY=0,t.lastTime=+new Date,t.elapseTime=0,t.left=parseInt(200*Math.random()),t.top=400-parseInt(20*Math.random()));var n=(i=i||+new Date)-t.lastTime,a=1e3/n;t.top+=t.velocityY/a,t.left+=t.velocityX/a,t.elapseTime+=n,t.velocityY=.6*-(t.initVelocityY-t.elapseTime/1e3*9.81)}},e=[],i=0;i<1;i++)e.push(new a.a({painter:s,behaviors:[t],left:parseInt(200*Math.random()),top:400-parseInt(20*Math.random()),velocityX:4+10*Math.random(),velocityY:0,initVelocityY:100-50*Math.random(),lastTime:+new Date,elapseTime:0,radius:12,innerColor:"rgba(100,145,230,1)",middleColor:"rgba(100,145,230,0.7)",outerColor:"rgba(100,145,230,0.5)",strokeStyle:"blue"}));this.lobBalls=e,this.animateLob()},animateLob:function(t){var e=this.$refs.c2,i=e.getContext("2d");i.fillStyle="#ffffff",i.fillRect(0,0,e.width,e.height),this.lobBalls.forEach(function(t){t.update(i)}),this.lobBalls.forEach(function(t){t.paint(i)}),window.requestAnimationFrame(this.animateLob)},startPendulum:function(){var t={execute:function(t,e,i){i=i||+new Date,t.elapseTime+=(i-t.lastTime)/1e3,t.angle=t.initAngle*Math.cos(Math.sqrt(40)*t.elapseTime),t.weightX=t.x+Math.sin(t.angle)*t.rodLength,t.weightY=t.y+Math.cos(t.angle)*t.rodLength,t.lastTime=i}},e={pivotFillStyle:"rgba(0,0,0,0.2)",weightShadowCOlor:"rgb(0,0,0)",pivotShadowColor:"rgb(255,255,0)",strokeColor:"rgb(100,100,195)",paint:function(t,e){this.drawPivot(t,e),this.drawRod(t,e),this.drawWeight(t,e)},drawWeight:function(t,e){e.save(),e.beginPath(),e.arc(t.weightX,t.weightY,t.weightRadius,0,2*Math.PI,!1),e.clip(),e.shadowColor=this.weightShadowCOlor,e.shadowOffsetX=-4,e.shadowOffsetY=-4,e.shadowBlur=8,e.lineWidth=2,e.strokeStyle=this.strokeColor,e.stroke(),e.beginPath(),e.arc(t.weightX,t.weightY,t.weightRadius/2,0,2*Math.PI,!1),e.clip(),e.shadowColor=this.pivotShadowColor,e.shadowOffsetX=-4,e.shadowOffsetY=-4,e.shadowBlur=8,e.stroke(),e.restore()},drawPivot:function(t,e){e.save(),e.beginPath(),e.fillStyle=this.pivotFillStyle,e.arc(t.x+t.pivotRadius,t.y,t.pivotRadius,0,2*Math.PI,!1),e.fill(),e.stroke(),e.restore()},drawRod:function(t,e){e.beginPath(),e.moveTo(t.x+t.pivotRadius+t.pivotRadius*Math.sin(t.angle),t.y+t.pivotRadius*Math.cos(t.angle)),e.lineTo(t.weightX-t.weightRadius*Math.sin(t.angle),t.weightY-t.weightRadius*Math.cos(t.angle)),e.stroke()}},i=Math.PI/7;this.pendulum=new a.a({painter:e,behaviors:[t],initAngle:i,angle:i,x:150,y:30,weightX:0,weightY:0,weightRadius:25,rodLength:320,pivotRadius:7,lastTime:+new Date,elapseTime:0}),this.animatePendulum()},animatePendulum:function(){var t=this.$refs.c3,e=t.getContext("2d");e.fillStyle="#ffffff",e.fillRect(0,0,t.width,t.height),this.pendulum.update(e),this.pendulum.paint(e),window.requestAnimationFrame(this.animatePendulum)}}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page article"},[i("h2",{staticClass:"title"},[t._v("Canvas学习笔记之七：物理效果")]),t._v(" "),i("div",{staticClass:"content"},[i("h3",{staticClass:"title"},[t._v("自由落体")]),t._v(" "),i("p",[t._v("重力是最弱的宇宙基本力。四种宇宙基本力：强核作用力、电磁力、弱核作用力以及重力。")]),t._v(" "),t._m(0),t._v(" "),i("div",{staticClass:"exp"},[i("canvas",{ref:"c1",attrs:{width:"300",height:"400"}})]),t._v(" "),t._m(1),t._v(" "),i("h3",{staticClass:"title"},[t._v("抛物线运动")]),t._v(" "),i("div",{staticClass:"exp"},[i("canvas",{ref:"c2",attrs:{width:"300",height:"400"}})]),t._v(" "),t._m(2),t._v(" "),i("h3",{staticClass:"title"},[t._v("钟摆运动")]),t._v(" "),i("div",{staticClass:"exp"},[i("canvas",{ref:"c3",attrs:{width:"300",height:"400"}})]),t._v(" "),i("p",[t._v("定义精灵对象：")]),t._v(" "),t._m(3),t._v(" "),i("p",[t._v("绘制器对象：")]),t._v(" "),t._m(4),t._v(" "),i("p",[t._v("行为对象：")]),t._v(" "),t._m(5)]),t._v(" "),i("footer",[t._v("2016年07月19日")]),t._v(" "),i("Comments"),t._v(" "),i("Catalog",{attrs:{catalog:t.catalog}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("在现实世界中，地球表面的物体在下坠时，其加速度都是9.81m/s/s，也可以表示为32ft/s/s。速度公式："),e("strong",[this._v("v = gt")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v("const move = {\n    execute (sprite, context, time) {\n        if (sprite.top + sprite.velocityY + sprite.radius > context.canvas.height) {\n            sprite.velocityY = 0\n            sprite.top = 0\n            sprite.lastTime = (+new Date())\n            sprite.elapseTime = 0\n        }\n        time = time || (+new Date())\n        let deltTime = time - sprite.lastTime\n        let fps = 1000 / deltTime\n        sprite.top += sprite.velocityY / fps\n        sprite.elapseTime += deltTime\n        sprite.velocityY = gravity * (sprite.elapseTime / 1000) * metersRatio\n    }\n}")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v("const move = {\n    execute (sprite, context, time) {\n        if (sprite.top + sprite.velocityY > context.canvas.height || sprite.left + sprite.velocityX > context.canvas.width) {\n            sprite.velocityY = 0\n            sprite.lastTime = (+new Date())\n            sprite.elapseTime = 0\n            sprite.left = parseInt(200 * Math.random())\n            sprite.top = 400 - parseInt(20 * Math.random())\n        }\n        time = time || (+new Date())\n        let deltTime = time - sprite.lastTime\n        let fps = 1000 / deltTime\n        sprite.top += sprite.velocityY / fps\n        sprite.left += sprite.velocityX / fps\n        sprite.elapseTime += deltTime\n        sprite.velocityY = -(sprite.initVelocityY - gravity * (sprite.elapseTime / 1000)) * metersRatio\n    }\n}")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v("const initAngle = Math.PI / 7\nthat.pendulum = new Sprite({\n    painter: pendulumPainter,\n    behaviors: [move],\n    initAngle: initAngle,\n    angle: initAngle,\n    x: 150,\n    y: 30,\n    weightX: 0,\n    weightY: 0,\n    weightRadius: 25,\n    rodLength: 320,\n    pivotRadius: 7,\n    lastTime: (+new Date()),\n    elapseTime: 0\n})")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v("const pendulumPainter = {\n    pivotFillStyle: 'rgba(0,0,0,0.2)',\n    weightShadowCOlor: 'rgb(0,0,0)',\n    pivotShadowColor: 'rgb(255,255,0)',\n    strokeColor: 'rgb(100,100,195)',\n    paint (sprite, context) {\n        this.drawPivot(sprite, context)\n        this.drawRod(sprite, context)\n        this.drawWeight(sprite, context)\n    },\n    drawWeight (sprite, context) {\n        context.save()\n        context.beginPath()\n        context.arc(sprite.weightX, sprite.weightY, sprite.weightRadius, 0, Math.PI * 2, false)\n        context.clip()\n        context.shadowColor = this.weightShadowCOlor\n        context.shadowOffsetX = -4\n        context.shadowOffsetY = -4\n        context.shadowBlur = 8\n        context.lineWidth = 2\n        context.strokeStyle = this.strokeColor\n        context.stroke()\n        context.beginPath()\n        context.arc(sprite.weightX, sprite.weightY, sprite.weightRadius / 2, 0, Math.PI * 2, false)\n        context.clip()\n        context.shadowColor = this.pivotShadowColor\n        context.shadowOffsetX = -4\n        context.shadowOffsetY = -4\n        context.shadowBlur = 8\n        context.stroke()\n        context.restore()\n    },\n    drawPivot (sprite, context) {\n        context.save()\n        context.beginPath()\n        context.fillStyle = this.pivotFillStyle\n        context.arc(sprite.x + sprite.pivotRadius, sprite.y, sprite.pivotRadius, 0, Math.PI * 2, false)\n        context.fill()\n        context.stroke()\n        context.restore()\n    },\n    drawRod (sprite, context) {\n        context.beginPath()\n        context.moveTo(sprite.x + sprite.pivotRadius + sprite.pivotRadius * Math.sin(sprite.angle), sprite.y + sprite.pivotRadius * Math.cos(sprite.angle))\n        context.lineTo(sprite.weightX - sprite.weightRadius * Math.sin(sprite.angle), sprite.weightY - sprite.weightRadius * Math.cos(sprite.angle))\n        context.stroke()\n    }\n}")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v("const move = {\n    execute (sprite, context, time) {\n        time = time || (+new Date())\n        sprite.elapseTime += (time - sprite.lastTime) / 1000\n        sprite.angle = sprite.initAngle * Math.cos(Math.sqrt(gravity / rodLength) * sprite.elapseTime)\n        sprite.weightX = sprite.x + Math.sin(sprite.angle) * sprite.rodLength\n        sprite.weightY = sprite.y + Math.cos(sprite.angle) * sprite.rodLength\n        sprite.lastTime = time\n    }\n}")])])}]};var l=i("Z0/y")(o,r,!1,function(t){i("COrO")},"data-v-50e6d324",null);e.default=l.exports},"u3//":function(t,e,i){"use strict";var n=i("ZLEe"),a=i.n(n),s=i("AA3o"),o=i.n(s),r=i("xSur"),l=i.n(r),h=function(){function t(e){var i=this;o()(this,t),this.name=e.name||"sprite",this.painter=e.painter,this.top=e.top||0,this.left=e.left||0,this.width=e.width||0,this.height=e.height||0,this.velocityX=e.velocityX||0,this.velocityY=e.velocityY||0,this.visible=e.visible||!0,this.animating=e.animating||!1,this.behaviors=e.behaviors||[],a()(e).forEach(function(t){void 0==i[t]&&(i[t]=e[t])})}return l()(t,[{key:"paint",value:function(t){this.painter&&this.visible&&this.painter.paint(this,t)}},{key:"update",value:function(t,e){var i=this;this.behaviors.forEach(function(n){n.execute(i,t,e)})}}]),t}();e.a=h},xSur:function(t,e,i){"use strict";e.__esModule=!0;var n,a=i("liLe"),s=(n=a)&&n.__esModule?n:{default:n};e.default=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,s.default)(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}()}});