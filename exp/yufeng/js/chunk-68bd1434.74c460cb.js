(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-68bd1434"],{"17c4":function(e,t,o){"use strict";var a=o("6fbb"),i=o.n(a);i.a},"2bbe":function(e,t,o){var a=o("9cde"),i=o("d302").set;e.exports=function(e,t,o){var n,r=t.constructor;return r!==o&&"function"==typeof r&&(n=r.prototype)!==o.prototype&&a(n)&&i&&i(e,n),e}},6636:function(e,t,o){"use strict";var a=o("690f"),i=o("bdac"),n=o("0016"),r=o("2bbe"),s=o("ae18"),l=o("e96b"),c=o("e2fa").f,u=o("7f0c").f,d=o("9ba3").f,f=o("b703").trim,v="Number",m=a[v],h=m,p=m.prototype,_=n(o("d115")(p))==v,g="trim"in String.prototype,S=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=g?t.trim():f(t,3);var o,a,i,n=t.charCodeAt(0);if(43===n||45===n){if(o=t.charCodeAt(2),88===o||120===o)return NaN}else if(48===n){switch(t.charCodeAt(1)){case 66:case 98:a=2,i=49;break;case 79:case 111:a=8,i=55;break;default:return+t}for(var r,l=t.slice(2),c=0,u=l.length;c<u;c++)if(r=l.charCodeAt(c),r<48||r>i)return NaN;return parseInt(l,a)}}return+t};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(e){var t=arguments.length<1?0:e,o=this;return o instanceof m&&(_?l(function(){p.valueOf.call(o)}):n(o)!=v)?r(new h(S(t)),o,m):S(t)};for(var w,y=o("241c")?c(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),N=0;y.length>N;N++)i(h,w=y[N])&&!i(m,w)&&d(m,w,u(h,w));m.prototype=p,p.constructor=m,o("3871")(a,v,m)}},"6fbb":function(e,t,o){},"7f0c":function(e,t,o){var a=o("c2ce"),i=o("e3d6"),n=o("e5e3"),r=o("ae18"),s=o("bdac"),l=o("a3a9"),c=Object.getOwnPropertyDescriptor;t.f=o("241c")?c:function(e,t){if(e=n(e),t=r(t,!0),l)try{return c(e,t)}catch(o){}if(s(e,t))return i(!a.f.call(e,t),e[t])}},"89f1":function(e,t,o){"use strict";var a=o("ac6d"),i=o.n(a);i.a},ac6d:function(e,t,o){},b703:function(e,t,o){var a=o("ac1b"),i=o("346b"),n=o("e96b"),r=o("d953"),s="["+r+"]",l="​",c=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),d=function(e,t,o){var i={},s=n(function(){return!!r[e]()||l[e]()!=l}),c=i[e]=s?t(f):r[e];o&&(i[o]=c),a(a.P+a.F*s,"String",i)},f=d.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(u,"")),e};e.exports=d},c2ce:function(e,t){t.f={}.propertyIsEnumerable},d302:function(e,t,o){var a=o("9cde"),i=o("f66f"),n=function(e,t){if(i(e),!a(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,a){try{a=o("5eff")(Function.call,o("7f0c").f(Object.prototype,"__proto__").set,2),a(e,[]),t=!(e instanceof Array)}catch(i){t=!0}return function(e,o){return n(e,o),t?e.__proto__=o:a(e,o),e}}({},!1):void 0),check:n}},d953:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},e2fa:function(e,t,o){var a=o("6ddc"),i=o("2f9d").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return a(e,i)}},ec84:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"page machining-monitor-page"},[o("CameraStatus"),o("CameraList")],1)},i=[],n=o("eb57"),r=o("0706"),s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"camera-status"},[o("div",{staticClass:"camera-top-title"},[o("ul",[o("li",[o("div",[e._v("摄像头总数")]),o("div",[e._v(e._s(e.cameraTotalAmount))])]),o("li",[o("div",[e._v("在线摄像头")]),o("div",[e._v(e._s(e.cameraOnlineAmount))])])])]),e._m(0),o("vue-scroll",{attrs:{ops:e.scrollOptions}},[o("ul",{staticClass:"status-list-content"},e._l(e.cameraList,function(t,a){return o("li",{key:a,class:{normal:1==t.status,error:0==t.status}},[o("div",[e._v(e._s(t.name))]),o("div",[e._v(e._s(1==t.status?"播放中":"异常"))]),o("div")])}),0)])],1)},l=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"status-list-header"},[o("div",[e._v("摄像头名称")]),o("div",[e._v("状态")]),o("div",[e._v("指示灯")])])}],c=o("de57"),u=o("f2de"),d=r["a"].MACHINING_MONITOR,f=Object(u["a"])(d).mapState,v={name:"MachiningMonitorCameraStatus",computed:Object(c["a"])({},f(["cameraTotalAmount","cameraOnlineAmount","cameraList"])),data:function(){return{scrollOptions:{vuescroll:{mode:"native",zooming:!1},bar:{background:"rgba(1, 187, 190, 0.7)"}}}}},m=v,h=o("25c1"),p=Object(h["a"])(m,s,l,!1,null,null,null);p.options.__file="CameraStatus.vue";var _,g=p.exports,S=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"camera-list",class:{full:e.fullMode}},[o("div",{staticClass:"camera-list-content"},e._l(e.currPageList,function(t,a){return o("CameraVideo",{key:t.id,attrs:{no:a+(e.currPage-1)*e.pageSize,name:t.name,url:t.url,status:t.status}})}),1),o("Pagination",{directives:[{name:"show",rawName:"v-show",value:!e.fullMode,expression:"!fullMode"}],attrs:{curr:e.currPage,total:e.totalPage},on:{switch:e.doSwitchPage}}),o("Pagination",{directives:[{name:"show",rawName:"v-show",value:e.fullMode,expression:"fullMode"}],staticClass:"float",attrs:{curr:e.fullModeVideoIndex+1,"show-nums":!1,total:e.cameraList.length},on:{switch:e.doSwitchFullModePage}})],1)},w=[],y=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"camera-video"},[o("div",{staticClass:"video-title"},[o("i",{staticClass:"iconfont"},[e._v("")]),o("span",[e._v(e._s(e.videoName))]),o("i",{class:{normal:1==e.videoStatus,error:0==e.videoStatus}}),o("div",{directives:[{name:"show",rawName:"v-show",value:!e.fullScreen&&(e.fullMode||1==e.videoStatus),expression:"!fullScreen && (fullMode || videoStatus==1)"}],staticClass:"iconfont",on:{click:function(t){e.switchFullScreen(!0)}}},[e._v("")]),o("div",{directives:[{name:"show",rawName:"v-show",value:e.fullScreen&&(e.fullMode||1==e.videoStatus),expression:"fullScreen  && (fullMode || videoStatus==1)"}],staticClass:"iconfont",on:{click:function(t){e.switchFullScreen(!1)}}},[e._v("")])]),o("div",{directives:[{name:"show",rawName:"v-show",value:1==e.videoStatus,expression:"videoStatus==1"}],ref:"container",staticClass:"video-container"},[o("video-player",{staticClass:"video-player-box",attrs:{options:e.playerOptions,playsinline:!0},on:{ready:e.playerReadied}})],1),o("div",{directives:[{name:"show",rawName:"v-show",value:0==e.videoStatus,expression:"videoStatus==0"}],staticClass:"video-error iconfont"},[e._v(""),o("div",{directives:[{name:"show",rawName:"v-show",value:e.fullScreen,expression:"fullScreen"}]},[e._v(e._s(e.timeCount)+"秒之后切换到下一个视频......")])])])},N=[],I=o("a6eb"),C=o.n(I),M=(o("6636"),o("f44b")),b=(o("d85c"),r["a"].MACHINING_MONITOR),O=Object(u["a"])(b).mapState,E="$store.state.".concat(b,".fullMode"),V="$store.state.".concat(b,".fullModeVideoUrl"),x="$store.state.".concat(b,".fullModeVideoIndex"),P=388,T=211,$={computed:Object(c["a"])({},O(["fullMode","fullModeVideoIndex","fullModeVideoName","fullModeVideoUrl","fullModeVideoStatus"]),{videoName:function(){var e=this;return e.fullMode&&(e.fullModeVideoIndex==e.no||e.fullScreen)?e.fullModeVideoName:e.name},videoStatus:function(){var e=this;return e.fullMode&&(e.fullModeVideoIndex==e.no||e.fullScreen)?e.fullModeVideoStatus:e.status}}),watch:(_={},Object(M["a"])(_,E,function(){var e=this;e.fullMode?(console.log("full mode change to true"),e.no!=e.fullModeVideoIndex&&e.$el.classList.add("fade")):(console.log("full mode change to false"),e.$el.classList.remove("fade"))}),Object(M["a"])(_,V,function(){var e=this;e.fullScreen&&(e.fullModeVideoUrl?e.fullModeVideoUrl&&(e.currUrl!=e.fullModeVideoUrl?(e.player.src(e.fullModeVideoUrl),e.player.load(),console.log("reload load video...",e.fullModeVideoUrl)):console.log("do not reload video...")):(e.currUrl="",console.log("load null video...")))}),Object(M["a"])(_,x,function(){var e=this;if(e.fullScreen&&(e.timeCount=3,!e.fullModeVideoUrl))var t=setInterval(function(){e.timeCount--,0==e.timeCount&&(clearInterval(t),e.$store.commit(b+"/"+n["a"].SWITCH_NEXT_VIDEOS))},1e3)}),_),props:{no:{type:Number},status:{type:Number,default:0},name:{type:String,default:"摄像头"},url:{type:String}},mounted:function(){var e=this;e.$nextTick(function(){if(1==e.status){var t=e.$refs.container;if(t){var o=getComputedStyle(t,null),a=e.playerOptions;a.width=C()(o.width),a.height=C()(o.height),a.sources[0].src=e.url,e.currUrl=e.url,console.log("success camers video...",e.name)}else console.log("error camers video...",e.name)}})},data:function(){return{fullScreen:!1,ready:!1,player:null,currUrl:"",timeCount:3,playerOptions:{autoplay:!0,width:P,height:T,fluid:!1,preload:"auto",language:"zh-CN",sources:[{type:"video/mp4",src:""}],notSupportedMessage:"暂无法播放",controlBar:{fullscreenToggle:!1,remainingTimeDisplay:!1}}}},methods:{playerReadied:function(e){var t=this;console.log("playerReadied...",t.name,t.fullModeVideoName),t.player=e},resizeVideo:function(e,t){var o=this,a=o.player;a&&(a.width(e),a.height(t))},switchFullScreen:function(e){var t=this;if(e){t.$store.commit(b+"/"+n["a"].SWITCH_VIDEO_FULL_SCREEN,{fullMode:!0,index:t.no,name:t.name,status:t.status,url:t.url});var o=document.querySelector(".camera-list-content");if(o){var a=getComputedStyle(o,null),i=t.$el;setTimeout(function(){i.style.cssText="position: absolute;top:0;left:0;width:".concat(a.width,";height:").concat(a.height);var e=C()(a.width)-10,o=C()(a.height)-40;t.$refs.container.style.height=o+"px",t.playerOptions.width=e,t.playerOptions.height=o,t.resizeVideo(e,o)},300)}}else{t.playerOptions.width=P,t.playerOptions.height=T;var r=t.$el,s=t.$refs.container;s&&(s.style.cssText=""),r.style.cssText="",t.resizeVideo(t.playerOptions.width,t.playerOptions.height),setTimeout(function(){t.$store.commit(b+"/"+n["a"].SWITCH_VIDEO_FULL_SCREEN,{fullMode:!1,index:t.no}),t.$store.commit(b+"/"+n["a"].GET_CURR_PAGE_VIDEOS,C()(t.fullModeVideoIndex/9)+1)},300)}t.fullScreen=e}}},L=$,A=Object(h["a"])(L,y,N,!1,null,null,null);A.options.__file="CameraVideo.vue";var k=A.exports,R=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"pagination-wrap"},[o("div",{staticClass:"prev-page",class:{disabled:!e.hasPrev},on:{click:function(t){e.switchPrevPage()}}}),o("i"),o("ul",{directives:[{name:"show",rawName:"v-show",value:e.showNums,expression:"showNums"}]},e._l(e.posList,function(t,a){return o("li",{key:a,class:{active:t==e.curr},on:{click:function(o){e.switchPage(t)}}},[e._v(e._s(t))])}),0),o("div",{staticClass:"next-page",class:{disabled:!e.hasNext},on:{click:function(t){e.switchNextPage()}}})])},U=[],j={name:"Pagination",props:{showNums:{type:Boolean,default:!0},total:{type:Number,default:0},curr:{type:Number,default:0}},computed:{posList:function(){var e=this,t=[],o=0,a=e.total;if(0==a||0==e.curr)return t;if(a<=7)for(o=1;o<=a;o++)t.push(o);else{t[0]=1,t[6]=a;var i=e.curr-1,n=e.curr+1;if(i<3){for(o=1;o<=4;o++)t[o]=o+1;t[5]="..."}else if(a-n<3){for(o=5;o>=2;o--)t[o]=t[o+1]-1;t[1]="..."}else t[1]="...",t[2]=i,t[3]=e.curr,t[4]=n,t[5]="..."}return t},hasPrev:function(){return this.curr>1},hasNext:function(){var e=this;return e.curr!=e.total}},methods:{switchPage:function(e){var t=this;"..."!=e&&t.$emit("switch",e)},switchPrevPage:function(){var e=this;e.hasPrev&&e.$emit("switch",e.curr-1)},switchNextPage:function(){var e=this;e.hasNext&&e.$emit("switch",e.curr+1)}}},F=j,D=(o("89f1"),Object(h["a"])(F,R,U,!1,null,null,null));D.options.__file="Pagination.vue";var G=D.exports,H=r["a"].MACHINING_MONITOR,W=Object(u["a"])(H).mapState,z={name:"MachiningMonitorCameraList",computed:Object(c["a"])({},W(["currPageList","currPage","totalPage","fullMode","fullModeVideoIndex","cameraList"]),{pageSize:function(){return this.$store.state.winWidth<=1400?6:9}}),components:{CameraVideo:k,Pagination:G},methods:{doSwitchPage:function(e){var t=this;t.$store.commit(H+"/"+n["a"].GET_CURR_PAGE_VIDEOS,e)},doSwitchFullModePage:function(e){var t=this;e-=1,t.$store.commit(H+"/"+n["a"].SWITCH_FULL_MODE_VIDEO,e)}}},X=z,B=Object(h["a"])(X,S,w,!1,null,null,null);B.options.__file="CameraList.vue";var J=B.exports,Y=r["a"].MACHINING_MONITOR,q={name:"MachiningMonitorIndex",components:{CameraStatus:g,CameraList:J},data:function(){return{inSwitch:!1}},created:function(){var e=this;e.$store.commit(n["a"].SWITCH_LOADING,!1),e.$store.commit(Y+"/"+n["a"].GET_CURR_PAGE_VIDEOS,1),document.addEventListener("keyup",e.doSwitchVideo)},activated:function(){var e=this;e.$store.commit(n["a"].SWITCH_LOADING,!1),document.addEventListener("keyup",e.doSwitchVideo)},deactivated:function(){var e=this;document.removeEventListener("keyup",e.doSwitchVideo)},methods:{doSwitchVideo:function(e){var t=this;t.inSwitch||(t.inSwitch=!0,38==e.keyCode?t.$store.commit(Y+"/"+n["a"].SWITCH_PREV_VIDEOS):40==e.keyCode&&t.$store.commit(Y+"/"+n["a"].SWITCH_NEXT_VIDEOS),setTimeout(function(){t.inSwitch=!1},1e3))}},beforeDestroy:function(){var e=this;document.removeEventListener("keyup",e.doSwitchVideo)}},K=q,Q=(o("17c4"),Object(h["a"])(K,a,i,!1,null,null,null));Q.options.__file="Index.vue";t["default"]=Q.exports}}]);