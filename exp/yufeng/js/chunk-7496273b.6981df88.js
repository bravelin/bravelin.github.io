(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7496273b"],{"1a1e":function(t,a,e){"use strict";a["a"]={geoJsonBaseUrl:"./geo-json/china/",mapStyle:"amap://styles/darkblue",monitorMarkerImgUrl:{normal:"./images/4/1.png",active:"./images/4/2.png"},fmMarkerImgUrl:{normal:"./images/4/3.png",active:"./images/4/4.png"},productionMonitorMap:{center:[114.9,25.807761],zoom:7},transportTrajectoryMap:{center:[116.397428,39.90923],zoom:17},truckImgUrl:{normal:"./images/6/1.png",active:"./images/6/2.png"}}},"1dbc":function(t,a,e){},"6f7c":function(t,a,e){"use strict";e.r(a);var r,i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"production-page page"},[e("Map"),e("Search"),e("Charts",{directives:[{name:"show",rawName:"v-show",value:"fm"==t.currActive.type,expression:"currActive.type=='fm'"}]}),e("CameraVideo",{directives:[{name:"show",rawName:"v-show",value:"mn"==t.currActive.type,expression:"currActive.type=='mn'"}]})],1)},n=[],o=e("de57"),c=e("f2de"),s=e("eb57"),l=e("0706"),m=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"right-container charts"},[e("h3",[t._v("FM1实时环境")]),e("ul",[e("li",{staticClass:"temperature",class:{active:"temperature"==t.currFm},on:{click:function(a){t.switchFm("temperature","温度")}}},[e("div",[t._v(t._s(t.fmData.temperature)+"°C")]),e("div",[t._v("温度")])]),e("li",{staticClass:"humidity",class:{active:"humidity"==t.currFm},on:{click:function(a){t.switchFm("humidity","湿度")}}},[e("div",[t._v(t._s(t.fmData.humidity)+"%")]),e("div",[t._v("湿度")])]),e("li",{staticClass:"light",class:{active:"light"==t.currFm},on:{click:function(a){t.switchFm("light","光照")}}},[e("div",[t._v(t._s(t.fmData.light)+"Lux")]),e("div",[t._v("光照")])]),e("li",{staticClass:"pressure",class:{active:"pressure"==t.currFm},on:{click:function(a){t.switchFm("pressure","气压")}}},[e("div",[t._v(t._s(t.fmData.pressure)+"Pa")]),e("div",[t._v("气压")])])]),e("div",{staticClass:"plane chart-container",class:{"full-screen-plane":t.curveChartFullState}},[e("ul",[e("li",{class:{active:"HOUR"==t.currFmDataType},on:{click:function(a){t.switchFmDataType("HOUR")}}},[t._v("时刻数据")]),e("li",{class:{active:"WEEK"==t.currFmDataType},on:{click:function(a){t.switchFmDataType("WEEK")}}},[t._v("七天数据")])]),e("div",{ref:"chart",staticClass:"wrap"}),e("i",{staticClass:"iconfont full-icon",domProps:{innerHTML:t._s(t.curveChartFullState?"&#xe603;":"&#xe754;")},on:{click:t.doSwitchFullState}})])])},u=[],p=(e("3c1b"),e("5830"),e("d85c"),e("f44b")),d=e("3604"),f=l["a"].PRODUCTION_MONITOR,h=Object(c["a"])(f).mapState,v="$store.state.".concat(f,".fmChartDatas"),g="$store.state.".concat(f,".curveChartFullState"),M={name:"ProductionMonitorCharts",computed:Object(o["a"])({},h(["currFm","fmData","currFmDataType","fmChartDatas","currFmName","chartUnit","curveChartFullState"])),watch:(r={},Object(p["a"])(r,v,function(){this.doInitOrRefreshChart()}),Object(p["a"])(r,g,function(){this.doInitOrRefreshChart()}),r),data:function(){return{container:null,chart:null}},mounted:function(){var t=this;t.$nextTick(function(){t.container=t.$refs.chart,t.fmChartDatas.length&&t.initChart()})},methods:{doInitOrRefreshChart:function(){var t=this,a=t.$store.state[f].fmChartDatas;a&&a.length&&t.container&&(t.chart?t.refreshChart(a):t.initChart(a))},switchFm:function(t,a){var e=this,r=e.$store;e.currFm!=t&&(r.commit(f+"/"+s["a"].SWITCH_FM,{value:t,name:a}),r.dispatch(f+"/"+s["a"].GET_FMS_CHART_DATA))},switchFmDataType:function(t){var a=this,e=a.$store;a.currFmDataType!=t&&(e.commit(f+"/"+s["a"].SWITCH_FM_DATA_TYPE,t),e.dispatch(f+"/"+s["a"].GET_FMS_CHART_DATA))},initChart:function(){var t=this,a=t.doHandlerData(t.fmChartDatas),e=a.titles,r=a.barDatas,i=a.lineDatas;t.chart=d["default"].init(t.container);var n={grid:{top:15,left:28,right:2,bottom:5,containLabel:!0},tooltip:{trigger:"axis",axisPointer:{lineStyle:{color:"#aaa"}},formatter:function(a){return"时间：".concat(a[0].name,"<br/>").concat(t.currFmName,"：").concat(a[0].data.value," ").concat(t.chartUnit)}},xAxis:[{type:"category",data:e,boundaryGap:!0,axisTick:{show:!1},axisLine:{lineStyle:{color:"rgba(38, 99, 188, 0.5)"}},axisLabel:{margin:15,textStyle:{color:"#fff"}}}],yAxis:[{show:!0,offset:22,splitLine:{show:!0,lineStyle:{type:"dosh",color:"rgba(38, 99, 188, 0.3)"}},axisTick:{show:!1},axisLine:{show:!0,lineStyle:{color:"rgba(38, 99, 188, 0.5)"}},axisLabel:{show:!0,color:"#fff"}}],color:["#e54035"],series:[{type:"pictorialBar",barCategoryGap:"-80%",symbol:'path://d="M150 50 L130 130 L170 130  Z"',itemStyle:{normal:{color:function(t){var a=["rgba(13,177,205,0.8)","rgba(29,103,182,0.6)","rgba(13,177,205,0.8)","rgba(29,103,182,0.6)","rgba(13,177,205,0.8)","rgba(29,103,182,0.6)"];return a[t.dataIndex]}},emphasis:{opacity:1}},data:r},{symbol:"image://data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAvCAYAAABzJ5OsAAAGDUlEQVRogbWaPWxcRRDHf/fO92Ffgk2MrXygBEJACCiQkCgQcoPSIAVXoYCKFBRIKegpQJHSBokehIgoiBBFrEiAQuEKgoQiPiIQEIRANnFI7ODYvvP5fBQ74zdvb/e9y9keafV27+3Hf2ZnZmf2XYlulx2kClAFVqS9V57LO7mIUmmb4H2wO90/l7YLfru0LWYGAd8A1oF2dM4wFS1UB8oFc3sLbV/yMbD9kF1cd6EDNPtbuBh8BUiAVmacP09+21+kqN0XDSL5UuQZ+w2y4LqRp18fwalPVIWGckBWvIE+yJJXz2PKAg3VtV0y9TbOBgYCnwSA+4ATD7zPSAj8pgFui+1XokDqrlOx2oQkbIEnpsQYUICb5rkZ+C2kUnWp9xixL/kKbqu0Ywh44pWy97SMPQ78A9w2ADsGfEf6bRqwm/KbqlHTMJAhX/INUleVB7xsypCpPwncBO6QlbyCfQyYkz6dQMnbhULw2Xdx4EOmPCiLLRtGtK8u3hVwG15pm7plwNqFZaAsfYC4wYY8iwVeMeUO7nBpSFsZ0HEKXMG3cafoOnAMuAEsBDBYVQqS9SiNAAMxqU8CR3G6OIzzyS8DM8B9wMPAi8DzwCjwEHAROCnrjMi4FeB+w7Rv+BYLGKn74Ne9jpYBX+qTOCkq8HEB+ouA7QA/AX8BYzJmBjgF7DEMNHH6XyVVw5DnslSX+YI6H5K4gq4CNbISfwd4Hxe7q4dQr6WeZEOE0wLWgNPA18Cn0j6M80i/Sz+1Aav/yFM1ZCXvkFJGfJVRJurA2x7IESMZH3wLJ+khATkNXJL3i2S9loJWDFbC69KHEt2uH1P7qlI2gI+JhEZw278fp7Mdaasuqxoo+LYAX5N17uK807LU7wKr8r5Ferpa9+mHEwzJQr6+W10Lucgq8BZwXvo0BHxjCg6/Ac895YyWFqx/AVffhW9uOAkjoNoilBeAT2TeI8BvZFXXlzy43W0mIomiAEwZmDcMPC3jEplseAqOnIOTChygBtUT8Ox5eIV0Z4bdKxrAa6QqM0q+sWYoyXvpTXKY7A58Rurra0DtLJyouV3poQMwftoxXMP1qeJs4XtS9bxJ2FVaPCDhS0Ka4cc6an0f2Z24gjlpp+DgWHwuAI7DE2ZMWcCfM4CXcoD3UEzyscGx8Lc0FgmeLHXDYfQlD/CeAgxK5YTwnUroSP6B1OI/Bm6Zdnepj7yzFI7nIeBJIhgypMYWIj/LOYQzqC7wAc7oEiSwmoW5ecdQlL6Ea/QGYl8FGOorN02QozaHAS0jwIQsOIPb1iGcx2kBrTPweSt1uxm6DnPvwVXpq4FZGzhLNqL8L4cB+1snoTfV8iWuWz0vE6vkTgHP4NSlCazNwp9vwoUf4Q+dYAmWL8KVl5yq6UG0Jq+Pk4bFe4ED5BxKhurgJGd1VWMTO1CP6n9xJ+EIqdSmgcuYUGAWrs/C3+SfsGsyZp+Zaz9O7fpRoQrQ1MCsTjb102KzJQ3KxmWBhpRDpL69n9hmlTREWJGiO9I0zKhd6M6rcLeoKDCzybKfCWnGdAv4ELiAixSbEfDrMt/rAvYMaSyjgP10sAewJfXzvpvzt82CXyQb3t4GvsPlp9pnSfotSn0Jl3FtAI8C35JKegJ4hGwYHFIZrW8lTbEcNi+L0gjzKE5aa0h4gDO6j6RcJk1SpoFXSb1My5QJYXKBXumHdmDrMsyCt7e/NrrUE9Hqv2ZTkzjjrJLGOf3msJM4r+TreCgJj0g4BR+L64tuDypeu5/bg3Gc3i9wb7cHUfC973qZiN3bPAAcBH41fWxsMopTj2uGiXu9t6mRvakOgq+TJguD3piN4/z2z4QNfzNQt8At6B5dzwOvurtqgPsMWFvY7bvKKPV7P18KPEPhbSwDsmBit8Qh16ifeoLfrIoOKT15bdhgSS9KLWD/6YP36yEp+7cFQSqSfOh6OQ9k6LcYsCLQhTToBzUfXFG7KNGw7dA3sAiI/sHXSCPE7ByD00CSUyq6PbDUQm6qAgD6yYDyjLNC70VvIW3nO2zRx+Rdp536fB/9bhShHWF8t/574P/bY1d26X/PtooMr/p/9AAAAABJRU5ErkJggg==",symbolSize:42,type:"line",data:i,itemStyle:{normal:{borderWidth:5,color:{colorStops:[{offset:0,color:"#821eff"},{offset:1,color:"#204fff"}]}}}}]};t.chart.setOption(n)},refreshChart:function(){var t=this,a=t.chart,e=t.doHandlerData(t.fmChartDatas),r=e.titles,i=e.barDatas,n=e.lineDatas,o=a.getOption(),c=o.series,s=o.xAxis,l=o.yAxis;c[0].data=i,c[1].data=n,s[0].data=r,a.setOption({series:c,xAxis:s,yAxis:l}),setTimeout(function(){a.resize()},10)},doHandlerData:function(t){var a=[],e=[],r=[];return t.forEach(function(t){a.push(t.title),e.push({name:t.title,value:t.data}),r.push({name:t.title,value:t.data})}),{titles:a,lineDatas:r,barDatas:e}},doSwitchFullState:function(){var t=this;t.$store.commit("".concat(f,"/").concat(s["a"].PRODUCTION_CURVE_FULL_STATE_CHANGE))}}},A=M,C=e("25c1"),y=Object(C["a"])(A,m,u,!1,null,null,null);y.options.__file="Charts.vue";var b=y.exports,w=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"right-container camera-video"},[e("div",[e("h3",[t._v("视频监控")]),e("div",{ref:"container",staticClass:"video-container",style:{height:t.containerHeight+"px"}},[e("video-player",{staticClass:"video-player-box",attrs:{options:t.playerOptions,playsinline:!0},on:{ready:t.playerReadied}})],1)])])},O=[],S=e("a6eb"),k=e.n(S),D={name:"ProductionCameraVideo",props:{url:{type:String}},mounted:function(){var t=this;t.$nextTick(function(){var a=t.$refs.container,e=getComputedStyle(a,null),r=k()(e.width),i=.625*r;t.containerHeight=i,t.playerOptions.width=r,t.playerOptions.height=i})},data:function(){return{ready:!1,player:null,containerHeight:0,playerOptions:{autoplay:!0,width:388,height:211,fluid:!1,preload:"auto",language:"zh-CN",sources:[{type:"video/mp4",src:"http://vjs.zencdn.net/v/oceans.mp4"}],notSupportedMessage:"暂无法播放",controlBar:{fullscreenToggle:!0,remainingTimeDisplay:!1}}}},methods:{playerReadied:function(){}}},F=D,T=Object(C["a"])(F,w,O,!1,null,null,null);T.options.__file="CameraVideo.vue";var x,E=T.exports,I=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"map-container"})},_=[],L=(e("b4c2"),e("175c"),e("bc97"),e("a5be"),e("1a1e")),P=l["a"].PRODUCTION_MONITOR,B=Object(c["a"])(P).mapState,H="$store.state.".concat(P,".fms"),R="$store.state.".concat(P,".monitors"),U={name:"ProductionMonitorMap",data:function(){return{map:null,mapReady:!1,mapMonitorMarkers:[],mapFmMarkers:[]}},computed:Object(o["a"])({},B(["monitors","fms","currActive"])),watch:(x={},Object(p["a"])(x,H,function(){this.addFmMarkers()}),Object(p["a"])(x,R,function(){this.addMonitorMarkers()}),x),mounted:function(){var t=this;t.$nextTick(function(){var a=new AMap.Map(t.$el,{zoom:L["a"].productionMonitorMap.zoom,center:L["a"].productionMonitorMap.center,mapStyle:L["a"].mapStyle,viewMode:"2D",lang:"zh_cn"});a.on("complete",function(){t.mapReady=!0,t.map=a,0==t.mapMonitorMarkers.length&&(t.monitors.length&&t.addMonitorMarkers(),t.fms.length&&t.addFmMarkers())})})},methods:{addMonitorMarkers:function(){var t=this,a=t.map;a&&(a.remove(t.mapMonitorMarkers),t.mapMonitorMarkers=t.monitors.map(function(a){return t.createMarker(a)}),a.add(t.mapMonitorMarkers))},addFmMarkers:function(){var t=this,a=t.map;a&&(a.remove(t.mapFmMarkers),t.mapFmMarkers=t.fms.map(function(a){return t.createMarker(a)}),a.add(t.mapFmMarkers))},createMarker:function(t){var a=this,e=t.name,r=t.lng,i=t.lat,n=(t.id,t.type),o=new AMap.LngLat(r,i),c="";"mn"==n?c=t.isActive?L["a"].monitorMarkerImgUrl.active:L["a"].monitorMarkerImgUrl.normal:"fm"==n&&(c=t.isActive?L["a"].fmMarkerImgUrl.active:L["a"].fmMarkerImgUrl.normal);var s=new AMap.Marker({position:o,offset:new AMap.Pixel(-11,-22),icon:c,title:e,zoom:13});return s.self=t,s.on("click",function(t){a.doHandlerClickMarker(t.target.self,t.target)}),s},doHandlerClickMarker:function(t,a){var e=this;if(!t.isActive){for(var r=e.map,i=e.currActive,n="mn"==i.type?e.mapMonitorMarkers:e.mapFmMarkers,o="mn"==i.type?e.monitors:e.fms,c=o[i.index],l=null,m=0;m<n.length;m++)if(n[m].self.id==c.id){l=n[m],n.splice(m,1),r.remove(l);break}for(var u="mn"==t.type?e.mapMonitorMarkers:e.mapFmMarkers,p=("mn"==t.type?e.monitors:e.fms,0);p<u.length;p++)if(u[p].self.id==t.id){u.splice(p,1),r.remove(a);break}e.$store.commit(P+"/"+s["a"].CHANGE_ACTIVE_MARKER,{index:t.index,type:t.type});var d=e.createMarker(c),f=e.createMarker(t);r.add(d),r.add(f),n.push(d),u.push(f)}}}},N=U,z=Object(C["a"])(N,I,_,!1,null,null,null);z.options.__file="Map.vue";var G=z.exports,j=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"search-wrap"})},Q=[],W={name:"ProductionMonitorSearch",created:function(){}},J=W,Y=Object(C["a"])(J,j,Q,!1,null,null,null);Y.options.__file="Search.vue";var K=Y.exports,q=l["a"].PRODUCTION_MONITOR,V=Object(c["a"])(q).mapState,X={name:"ProductionMonitorIndex",computed:Object(o["a"])({},V(["currActive"])),components:{Charts:b,Map:G,Search:K,CameraVideo:E},data:function(){return{}},created:function(){var t=this,a=t.$store;a.commit(s["a"].SWITCH_LOADING,!1),a.dispatch(q+"/"+s["a"].GET_MONITORS),a.dispatch(q+"/"+s["a"].GET_FMS)},activated:function(){var t=this,a=t.$store;a.commit(s["a"].SWITCH_LOADING,!1),a.dispatch(q+"/"+s["a"].GET_MONITORS),a.dispatch(q+"/"+s["a"].GET_FMS)},beforeDestroy:function(){var t=this.$store;t.commit("".concat(q,"/").concat(s["a"].PRODUCTION_CURVE_FULL_STATE_CHANGE),!1)}},Z=X,$=(e("95c8"),Object(C["a"])(Z,i,n,!1,null,null,null));$.options.__file="Index.vue";a["default"]=$.exports},"95c8":function(t,a,e){"use strict";var r=e("1dbc"),i=e.n(r);i.a}}]);