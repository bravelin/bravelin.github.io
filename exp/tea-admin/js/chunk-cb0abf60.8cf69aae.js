(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cb0abf60"],{"10fe":function(e,t,a){},cc21:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page farming-fertilizer-page"},[a("div",{staticClass:"plane"},[e._m(0),a("div",{staticClass:"plane-content padding"},[a("el-row",{staticClass:"search",attrs:{type:"flex"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}),a("VillageTownSelector",{attrs:{"curr-selector":e.villageSelector},on:{change:e.doVillageSelectorChange}}),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.timeValue,callback:function(t){e.timeValue=t},expression:"timeValue"}}),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"}},[e._v("搜索")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.fertilizer.loading,expression:"fertilizer.loading"}],attrs:{data:e.fertilizer.dataList,border:"",stripe:"","element-loading-text":"数据加载中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.5)"}},[a("el-table-column",{attrs:{label:"序号",width:"90",type:"index",align:"center",index:e.getIndex}}),a("el-table-column",{attrs:{prop:"gardenName",label:"茶园名称"}}),a("el-table-column",{attrs:{prop:"address",label:"茶园基地"}}),a("el-table-column",{attrs:{prop:"time",width:"150",label:"作业时间"}}),a("el-table-column",{attrs:{prop:"workMen",width:"150",label:"作业人"}}),a("el-table-column",{attrs:{prop:"fertilizerName",width:"140",label:"肥料名"}}),a("el-table-column",{attrs:{prop:"dosage",width:"120",label:"肥料用量"}}),a("el-table-column",{attrs:{prop:"type",width:"120",label:"作业方式"}}),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{on:{click:function(a){return e.showDetail(t.$index,t.row)}}},[e._v("详情")])]}}])})],1),a("el-dialog",{attrs:{title:"施肥详情",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"茶园名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.gardenName,callback:function(t){e.$set(e.form,"gardenName",t)},expression:"form.gardenName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"作业人","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.workMen,callback:function(t){e.$set(e.form,"workMen",t)},expression:"form.workMen"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"茶园基地","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"手机号码","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.tel,callback:function(t){e.$set(e.form,"tel",t)},expression:"form.tel"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"肥料名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.fertilizerName,callback:function(t){e.$set(e.form,"fertilizerName",t)},expression:"form.fertilizerName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"作业方式","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"施肥用量","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.dosage,callback:function(t){e.$set(e.form,"dosage",t)},expression:"form.dosage"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"施肥面积","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"施肥类型","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"作品图集","label-width":e.formLabelWidth}},[a("el-upload",{staticClass:"disable-upload",attrs:{action:e.uploadAction,disabled:!0,"file-list":e.form.imgs,"list-type":"picture-card","on-preview":e.doPreview}},[a("i",{staticClass:"el-icon-plus"})])],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("确 定")])],1)],1),a("el-pagination",{attrs:{"current-page":e.currentPage,background:"","page-sizes":[20,40,60,100],"page-size":20,layout:"total, sizes, prev, pager, next",total:e.fertilizer.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("Preview",{attrs:{"is-show":e.showPreview,list:e.previewList,index:e.previewIndex},on:{"update:isShow":function(t){e.showPreview=t},"update:is-show":function(t){e.showPreview=t}}})],1)])])},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"plane-title"},[a("h3",[e._v("施肥管理")])])}],i=(a("f91a"),a("5fa9")),o=a.n(i),s=a("d4fd"),n=a("a98d"),c=a("eb57"),f=a("84c8"),d=a("0706"),m=a("7ffc"),u=a("52c1"),p=d["a"].FARMING,h=Object(u["a"])(p).mapState,g="$store.state.".concat(p,".fertilizer.dataList"),b=("$store.state.".concat(p,".fertilizer.imgs"),{name:"farming-fertilizer-page",components:{VillageTownSelector:f["a"],Preview:m["a"]},computed:Object(n["a"])({},h(["fertilizer"])),watch:Object(s["a"])({},g,function(){this.refreshUrl()}),data:function(){return{searchValue:"",selectValue:"",villageSelector:[],timeValue:"",dialogFormVisible:!1,formLabelWidth:"85px",form:{},loading:"数据加载中",currentPage:1,uploadAction:"/api/upload",previewIndex:0,showPreview:!1,previewList:[]}},created:function(){this.$store.commit(c["a"].SWITCH_LOADING,!1);var e=this,t=e.$store,a=e.$route,l=a.query,r={};r.currentPage=o()(l.page||1),r.currentPageSize=o()(l.size||20),t.dispatch(p+"/"+c["a"].FARMING_GET_FERTILIZER_DATA,r)},methods:{getImageSize:function(e){var t=this,a=t.form.imgs[e],l=new Image;l.onload=function(){t.previewList.push({src:a.url,w:this.width,h:this.height}),e<t.pics.length-1&&t.getImageSize(e+1)},l.src=a.url},showDetail:function(e,t){this.form=this.fertilizer.dataList[e],this.pics=this.form.imgs,this.dialogFormVisible=!0,this.getImageSize(0)},handleSizeChange:function(e){console.log("每页 ".concat(e," 条"))},handleCurrentChange:function(e){console.log("当前页: ".concat(e))},getIndex:function(e){return e+1},doVillageSelectorChange:function(e){var t=this;t.villageSelector=e,2==e.length?t.villageName=e[0]+e[1]:t.villageName=""},doPreview:function(e){var t=this;t.previewIndex=0,console.log("that.previewList......",t.previewList);for(var a=0;a<t.previewList.length;a++)if(t.previewList[a].src==e.url){t.previewIndex=a;break}t.showPreview=!0},refreshUrl:function(){var e=this;console.log(456),e.$router.replace({name:"farming-fertilizer",query:{page:e.fertilizer.currentPage,size:e.fertilizer.currentPageSize}})}}}),w=b,v=(a("d705"),a("17cc")),z=Object(v["a"])(w,l,r,!1,null,null,null);t["default"]=z.exports},d705:function(e,t,a){"use strict";var l=a("10fe"),r=a.n(l);r.a}}]);