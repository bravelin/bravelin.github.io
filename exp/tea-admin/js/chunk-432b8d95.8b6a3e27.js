(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-432b8d95"],{"0195":function(e,t,a){a("b0e1"),e.exports=a("836e").Array.isArray},"50cd":function(e,t,a){"use strict";var i=a("4cf4"),l=a("0763");e.exports=function(e,t,a){t in e?i.f(e,t,l(0,a)):e[t]=a}},"8af1":function(e,t,a){"use strict";var i=a("8232"),l=a("471d"),n=a("7182"),r=a("44a7"),s=a("33ef"),o=a("3202"),c=a("50cd"),d=a("0811");l(l.S+l.F*!a("1969")(function(e){Array.from(e)}),"Array",{from:function(e){var t,a,l,u,p=n(e),g="function"==typeof this?this:Array,f=arguments.length,m=f>1?arguments[1]:void 0,b=void 0!==m,v=0,h=d(p);if(b&&(m=i(m,f>2?arguments[2]:void 0,2)),void 0==h||g==Array&&s(h))for(t=o(p.length),a=new g(t);t>v;v++)c(a,v,b?m(p[v],v):p[v]);else for(u=h.call(p),a=new g;!(l=u.next()).done;v++)c(a,v,b?r(u,m,[l.value,v],!0):l.value);return a.length=v,a}})},"92dd":function(e,t,a){a("4d6c"),a("8af1"),e.exports=a("836e").Array.from},"97b2":function(e,t,a){var i=a("419b"),l=a("0902")("iterator"),n=a("9191");e.exports=a("836e").isIterable=function(e){var t=Object(e);return void 0!==t[l]||"@@iterator"in t||n.hasOwnProperty(i(t))}},"98c9":function(e,t,a){"use strict";a("3b80")("trim",function(e){return function(){return e(this,3)}})},a945:function(e,t,a){a("98be"),a("4d6c"),e.exports=a("97b2")},b09e:function(e,t,a){"use strict";var i=a("b337"),l=a.n(i);function n(e){if(l()(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}var r=a("f0b9"),s=a.n(r),o=a("e999"),c=a.n(o);function d(e){if(c()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return s()(e)}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function p(e){return n(e)||d(e)||u()}a.d(t,"a",function(){return p})},b0e1:function(e,t,a){var i=a("471d");i(i.S,"Array",{isArray:a("5fdf")})},b337:function(e,t,a){e.exports=a("0195")},e728:function(e,t,a){},e999:function(e,t,a){e.exports=a("a945")},f0b9:function(e,t,a){e.exports=a("92dd")},f696:function(e,t,a){"use strict";var i=a("e728"),l=a.n(i);l.a},fd85:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page garden-page"},[a("div",{staticClass:"plane"},[e._m(0),a("div",{staticClass:"plane-content padding"},[a("div",{staticClass:"plane-search-form"},[a("el-input",{attrs:{placeholder:"茶园名称",maxlength:50,clearable:!0},model:{value:e.gardenNameInput,callback:function(t){e.gardenNameInput=t},expression:"gardenNameInput"}}),a("VillageTownSelector",{attrs:{"curr-selector":e.villageSelector},on:{change:e.doVillageSelectorChange}}),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.queryData}},[e._v("搜索")])],1),a("div",{staticClass:"table-wrap"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.dataList,border:"",stripe:"","element-loading-text":"数据加载中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.5)"}},[a("el-table-column",{attrs:{label:"序号",width:"90",type:"index",align:"center",index:e.getIndex}}),a("el-table-column",{attrs:{prop:"gardenName",label:"茶园名称",align:"center"}}),a("el-table-column",{attrs:{prop:"owner",width:"150",label:"负责人",align:"center"}}),a("el-table-column",{attrs:{prop:"tel",width:"140",label:"手机号码",align:"center"}}),a("el-table-column",{attrs:{prop:"address",label:"地址",align:"center"}}),a("el-table-column",{attrs:{prop:"baseAmount",width:"120",label:"基地数量",align:"center"}}),a("el-table-column",{attrs:{prop:"statusText",width:"120",label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"status-text",class:{audited:"1"==t.row.status}},[e._v(e._s(t.row.statusText))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{plain:"",type:"primary",size:"small"},on:{click:function(a){return e.doViewDetail(t.row)}}},[e._v("详情")])]}}])})],1),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total,expression:"total"}],attrs:{"current-page":e.currentPage,"page-sizes":[20,40,60,100],"page-size":e.currentPageSize,background:"",layout:"total, sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentPageChange}})],1)])]),a("Detail")],1)},l=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"plane-title"},[a("h3",[e._v("茶园管理")])])}],n=(a("f91a"),a("98c9"),a("5fa9")),r=a.n(n),s=a("d4fd"),o=a("a98d"),c=a("52c1"),d=a("0706"),u=a("eb57"),p=a("84c8"),g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:"茶园详情",visible:e.detailFormVisible},on:{close:e.doClose}},[a("el-form",{attrs:{model:e.detail,"label-width":"85px","label-position":"right"}},[a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"茶园状态："}},[a("el-input",{attrs:{disabled:e.disabledStatus},model:{value:e.detail.statusText,callback:function(t){e.$set(e.detail,"statusText",t)},expression:"detail.statusText"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"负责人："}},[a("el-input",{attrs:{disabled:e.disabledStatus},model:{value:e.detail.owner,callback:function(t){e.$set(e.detail,"owner",t)},expression:"detail.owner"}})],1)],1)],1),a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"基地数量："}},[a("el-input",{attrs:{disabled:e.disabledStatus},model:{value:e.detail.baseAmount,callback:function(t){e.$set(e.detail,"baseAmount",t)},expression:"detail.baseAmount"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"手机号码："}},[a("el-input",{attrs:{disabled:e.disabledStatus},model:{value:e.detail.tel,callback:function(t){e.$set(e.detail,"tel",t)},expression:"detail.tel"}})],1)],1)],1),a("el-form-item",{attrs:{label:"茶园名称："}},[a("el-input",{attrs:{disabled:e.disabledStatus},model:{value:e.detail.gardenName,callback:function(t){e.$set(e.detail,"gardenName",t)},expression:"detail.gardenName"}})],1),a("el-form-item",{attrs:{label:"茶园地址："}},[a("el-input",{attrs:{disabled:e.disabledStatus},model:{value:e.detail.address,callback:function(t){e.$set(e.detail,"address",t)},expression:"detail.address"}})],1),a("el-form-item",{attrs:{label:"主要品种："}},[a("el-input",{attrs:{disabled:e.disabledStatus},model:{value:e.detail.varieties,callback:function(t){e.$set(e.detail,"varieties",t)},expression:"detail.varieties"}})],1),a("el-form-item",{attrs:{label:"茶园简介："}},[a("el-input",{attrs:{disabled:e.disabledStatus,type:"textarea"},model:{value:e.detail.brief,callback:function(t){e.$set(e.detail,"brief",t)},expression:"detail.brief"}})],1),a("el-form-item",{staticClass:"pics-list",attrs:{label:"产权证："}},[a("el-upload",{staticClass:"disable-upload",attrs:{action:e.uploadAction,disabled:!0,"file-list":e.detail.propertyRightPics,"list-type":"picture-card","on-preview":e.doPreview}},[a("i",{staticClass:"el-icon-plus"})])],1),a("el-form-item",{staticClass:"pics-list",attrs:{label:"茶园图集："}},[a("el-upload",{staticClass:"disable-upload",attrs:{action:e.uploadAction,disabled:!0,"file-list":e.detail.gardenPics,"list-type":"picture-card","on-preview":e.doPreview}},[a("i",{staticClass:"el-icon-plus"})])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.doCancel}},[e._v("驳回")]),a("el-button",{attrs:{type:"primary"},on:{click:e.doConfirm}},[e._v("通过审核")])],1)],1),a("Preview",{attrs:{"is-show":e.showPreview,list:e.previewList,index:e.previewIndex},on:{"update:isShow":function(t){e.showPreview=t},"update:is-show":function(t){e.showPreview=t}}})],1)},f=[],m=a("b09e"),b=a("7ffc"),v=d["a"].GARDEN,h=Object(c["a"])(v).mapState,w=("$store.state.".concat(v,".detail.propertyRightPics"),"$store.state.".concat(v,".detail.gardenPics")),S={name:"garden-detail",components:{Preview:b["a"]},computed:Object(o["a"])({},h(["detail","detailFormVisible"])),watch:Object(s["a"])({},w,function(){this.refreshPics()}),data:function(){return{disabledStatus:!0,uploadAction:"/api/upload",showPreview:!1,previewList:[],previewIndex:0,pics:[]}},methods:{doCancel:function(){var e=this;e.doClose()},doConfirm:function(){var e=this;e.doClose()},refreshPics:function(){var e=this,t=e.$store.state[v].detail;e.pics=[].concat(Object(m["a"])(t.propertyRightPics),Object(m["a"])(t.gardenPics)),e.previewList=[],e.getImageSize(0)},doPreview:function(e){var t=this;t.previewIndex=0,console.log("that.previewList......",t.previewList);for(var a=0;a<t.previewList.length;a++)if(t.previewList[a].src==e.url){t.previewIndex=a;break}t.showPreview=!0},getImageSize:function(e){var t=this,a=t.pics[e],i=new Image;i.onload=function(){t.previewList.push({src:a.url,w:this.width,h:this.height}),e<t.pics.length-1&&t.getImageSize(e+1)},i.src=a.url},doClose:function(){var e=this;e.$store.commit(v+"/"+u["a"].GARDEN_SWITCH_DETAIL_DIALOG,!1)}}},x=S,C=a("17cc"),y=Object(C["a"])(x,g,f,!1,null,null,null),I=y.exports,P=d["a"].GARDEN,N=Object(c["a"])(P).mapState,A="$store.state.".concat(P,".dataList"),_={name:"garden-page",components:{VillageTownSelector:p["a"],Detail:I},computed:Object(o["a"])({},N(["loading","dataList","currentPage","currentPageSize","total"])),watch:Object(s["a"])({},A,function(){this.refreshUrl()}),data:function(){return{gardenNameInput:"",villageName:"",villageSelector:[]}},created:function(){var e=this,t=e.$store,a=e.$route,i=a.query;if(i.gardenName&&(e.gardenNameInput=decodeURIComponent(i.gardenName)),i.town){var l=decodeURIComponent(i.town);e.villageName=l,e.villageSelector.push(l)}if(i.village){var n=decodeURIComponent(i.village);e.villageName+=n,e.villageSelector.push(n)}e.queryData({currentPage:r()(i.page||1),currentPageSize:r()(i.size||20)}),t.commit(u["a"].SWITCH_LOADING,!1)},methods:{queryData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this;e.gardenName=t.gardenNameInput.trim(),e.villageName=t.villageName,t.$store.dispatch(P+"/"+u["a"].GARDEN_GET_DATA_LIST,e)},handleSizeChange:function(e){this.queryData({currentPage:1,currentPageSize:e})},handleCurrentPageChange:function(e){this.queryData({currentPage:e})},doVillageSelectorChange:function(e){var t=this;t.villageSelector=e,2==e.length?t.villageName=e[0]+e[1]:t.villageName=""},getIndex:function(e){return(this.currentPage-1)*this.currentPageSize+e+1},doViewDetail:function(e){console.log("查看详情。。。",e);var t=this;t.$store.commit(u["a"].SWITCH_LOADING,!0),this.$store.dispatch(P+"/"+u["a"].GARDEN_GET_DETAIL)},refreshUrl:function(){var e=this,t=e.gardenNameInput.trim(),a=e.villageSelector[0],i=e.villageSelector[1];e.$router.replace({name:"garden",query:{page:e.currentPage,size:e.currentPageSize,gardenName:t?encodeURIComponent(t):"",town:a?encodeURIComponent(a):"",village:i?encodeURIComponent(i):""}})}}},$=_,k=(a("f696"),Object(C["a"])($,i,l,!1,null,null,null));t["default"]=k.exports}}]);