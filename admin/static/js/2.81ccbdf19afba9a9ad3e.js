webpackJsonp([2],{"2pXy":function(t,e,a){(t.exports=a("D/Sv")(!1)).push([t.i,"\n#articles-page .panel {\n  position: relative;\n}\n#articles-page .panel-title {\n  position: relative;\n}\n#articles-page .add-btn {\n  position: absolute;\n  top: 55px;\n  right: 15px;\n  z-index: 3;\n}\n#articles-page .tab-menus {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n}\n#articles-page .search-input {\n  padding-top: 12px;\n  padding-bottom: 10px;\n}\n#articles-page .add-modal .modal-form .form-item label {\n  width: 70px;\n}\n#articles-page .add-modal .modal-form .form-item input, #articles-page .add-modal .modal-form .form-item textarea {\n  width: 450px;\n  padding: 6px 12px;\n}\n#articles-page .add-modal .modal-form .form-item textarea {\n  height: 100px;\n  background: #fafafa;\n}\n",""])},NBnH:function(t,e,a){(t.exports=a("D/Sv")(!1)).push([t.i,"\n.tab-menus {\n  position: relative;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  height: 54px;\n  -webkit-box-pack: end;\n      -ms-flex-pack: end;\n          justify-content: flex-end;\n  -webkit-box-align: end;\n      -ms-flex-align: end;\n          align-items: flex-end;\n  border-bottom: 2px solid #646f86;\n  padding: 0 10px;\n}\n.tab-menus > canvas:not(:last-child) {\n    margin-right: -20px;\n}\n.tab-menus > canvas {\n    cursor: pointer;\n}\n.tab-menus > div {\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    width: 500px;\n}\n",""])},VQUg:function(t,e,a){var i=a("2pXy");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("P+mm")("551c0dee",i,!0,{})},hyli:function(t,e,a){"use strict";var i={name:"tabMenuItem",watch:{isActive:function(){this.doDraw(this.isActive)}},data:function(){return{zIndex:1}},props:{w:{type:Number,default:130},h:{type:Number,default:40},text:{type:String,default:""},isActive:{type:Boolean,default:!1},menuIndex:{type:Number}},mounted:function(){var t=this;t.$nextTick(function(){t.doDraw(t.isActive)})},methods:{doDraw:function(t,e){var a=this.$el.getContext("2d"),i=this.w,n=this.h,o=n-0,d=18,s="#646f86",r="#646f86",l="#fff";t?e&&(s="rgba(100, 111, 134, 0.6)"):(s="#eef1f5",r="#ccc",l="#646f86"),a.clearRect(0,0,i,n),a.beginPath(),a.fillStyle=s,a.strokeStyle=r,a.lineWidth=1,a.moveTo(36,1),a.bezierCurveTo(6,1,d,o,0,o),a.lineTo(i,o),a.bezierCurveTo(i-d,o,i-d+12,1,i-36,1),a.lineTo(36,1),t||a.stroke(),a.fill(),a.font="normal 16px 微软雅黑",a.textAlign="center",a.textBaseline="middle",a.fillStyle=l,a.fillText(this.text,i/2,n/2),this.zIndex=t?10:10-this.menuIndex},doHover:function(){this.doDraw(!0,!0)},doOut:function(){this.doDraw(this.isActive)},doClickMenu:function(){this.isActive||this.$emit("switch",this.menuIndex)}}},n={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("canvas",{style:{"z-index":t.zIndex},attrs:{width:t.w,height:t.h},on:{mouseover:function(e){t.doHover()},mouseleave:function(e){t.doOut()},click:function(e){t.doClickMenu()}}})},staticRenderFns:[]},o={name:"tabMenu",components:{TabMenuItem:a("U5Ua")(i,n,!1,null,null,null).exports},props:{activeId:{type:[String,Number],default:""},list:{type:Array,default:[],require:!0}},methods:{doSwitch:function(t){this.$emit("switch",this.list[t].id)}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tab-menus"},[t._t("default"),t._v(" "),t._l(t.list,function(e,i){return a("TabMenuItem",{key:e.id,attrs:{text:e.label,"is-active":e.id==t.activeId,"menu-index":i},on:{switch:t.doSwitch}})})],2)},staticRenderFns:[]};var s=a("U5Ua")(o,d,!1,function(t){a("mtQr")},null,null);e.a=s.exports},ieVB:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("qWzu"),n=a.n(i),o=a("y0YP"),d=a("2iX2"),s=a("hyli"),r=a("Vo7i"),l=a("UGLA"),c=a("0ecl"),m=a("aIbl"),u={name:"articles",components:{Modal:d.a,SearchInput:c.a,Pagination:m.a,TabMenu:s.a},data:function(){return{menus:[{label:"全部",id:"all"},{label:"草稿",id:"draft"},{label:"已发布",id:"online"},{label:"已下线",id:"downline"}],activeMenuId:"all",statusObj:{draft:"草稿",online:"已发布",downline:"已下线"},searchKey:"",dataList:[],page:1,totalPage:0,pageSize:20,isShowAddModal:!1,addModalCommitTip:"",addForm:{title:"",type:"",category:"",description:"",date:"",routerName:""},isShowDelConfirmModal:!1,delTitle:"",delId:""}},created:function(){var t=this.$store.state.currRouter.query;this.activeMenuId=t.status||"all",this.page=t.page||1,this.searchKey=t.key?decodeURIComponent(t.key):"",this.queryDataList(),Object(o.a)(!1)},methods:{doSwitchMenu:function(t){this.activeMenuId!=t&&(this.activeMenuId=t,this.queryDataList(1))},doSwitchPage:function(t){this.queryDataList(t)},queryDataList:function(t){var e=this;t=t||e.page;var a=e.searchKey.trim(),i={fields:{content:!1},limit:e.pageSize,where:{},skip:(t-1)*e.pageSize,order:"createdAt DESC"},d={fields:{id:!0},limit:1e4,where:{}};"all"!=e.activeMenuId&&(i.where.status=e.activeMenuId,d.where.status=e.activeMenuId),a&&(i.where.title={like:a},d.where.title={like:a}),e.$router.replace({name:"articles",query:{status:e.activeMenuId,key:encodeURIComponent(e.searchKey),page:t}}),Object(r.a)({url:"https://d.apicloud.com/mcm/api/articles",params:{filter:n()(d)}}).then(function(t){e.totalPage=Math.ceil(t.length/e.pageSize)}),Object(r.a)({url:"https://d.apicloud.com/mcm/api/articles",params:{filter:n()(i)}}).then(function(a){e.dataList=a||[],e.page=t,Object(o.a)(!1)})},doDel:function(t){this.delTitle=t.title,this.delId=t.id,this.isShowDelConfirmModal=!0},doCommitDel:function(){var t=this;Object(o.a)(!0),Object(r.a)({url:"https://d.apicloud.com/mcm/api/articles/{id}",method:"DELETE",params:{id:t.delId}}).then(function(){Object(l.a)("删除成功！"),Object(o.a)(!1),t.queryDataList(),t.isShowDelConfirmModal=!1})},doChangeStatus:function(t,e){var a=this;Object(o.a)(!0),Object(r.a)({url:"https://d.apicloud.com/mcm/api/articles/{id}",method:"put",params:{id:t.id},data:{$set:{status:e}}}).then(function(){Object(l.a)("操作成功！"),Object(o.a)(!1),a.queryDataList()})},doAdd:function(){var t=this.addForm;t.title="",t.type="",t.category="",t.description="",t.date="",t.routerName="",this.isShowAddModal=!0},doAddModalCommit:function(){var t=this,e=t.addForm;e.title=e.title.trim(),e.type=e.type.trim(),e.category=e.category.trim(),e.description=e.description.trim(),e.date=e.date.trim(),e.routerName=e.routerName.trim(),Object(o.a)(!0),Object(r.a)({url:"https://d.apicloud.com/mcm/api/articles",method:"post",data:{title:e.title,type:e.type,category:e.category,description:e.description,date:e.date,routerName:e.routerName,status:"draft"}}).then(function(e){e.id?(t.isShowAddModal=!1,t.queryDataList(),Object(l.a)("添加成功！",!0)):t.addModalCommitTip=e.error.message||"添加失败！",Object(o.a)(!1)})}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-page",class:{"pagination-page":t.totalPage>1},attrs:{id:"articles-page"}},[a("div",{staticClass:"panel"},[a("div",{staticClass:"panel-title"},[a("h3",[t._v("文章列表")]),a("button",{staticClass:"add-btn",on:{click:t.doAdd}},[t._v("添加")])]),t._v(" "),a("TabMenu",{attrs:{list:t.menus,"active-id":t.activeMenuId},on:{switch:t.doSwitchMenu}}),t._v(" "),a("SearchInput",{attrs:{placeholderText:"输入关键字","search-key":t.searchKey},on:{submit:function(e){t.queryDataList()},"update:searchKey":function(e){t.searchKey=e}}}),t._v(" "),a("div",{staticClass:"panel-content"},[a("table",{staticClass:"data-table"},[t._m(0),t._v(" "),t.dataList.length>0?a("tbody",t._l(t.dataList,function(e,i){return a("tr",{key:e.id},[a("td",[t._v(t._s(i+1+(t.page-1)*t.pageSize))]),t._v(" "),a("td",[t._v(t._s(e.title))]),t._v(" "),a("td",[t._v(t._s(e.type))]),t._v(" "),a("td",[t._v(t._s(e.category))]),t._v(" "),a("td",[t._v(t._s(e.description))]),t._v(" "),a("td",[t._v(t._s(e.date))]),t._v(" "),a("td",[t._v(t._s(e.routerName))]),t._v(" "),a("td",[t._v(t._s(t.statusObj[e.status]))]),t._v(" "),a("td",{staticClass:"ope-btns"},["online"!=e.status?a("a",{staticClass:"tool-btn-delete",on:{click:function(a){t.doDel(e)}}},[t._v("删除")]):t._e(),t._v(" "),"online"!=e.status?a("a",{staticClass:"tool-btn-online",on:{click:function(a){t.doChangeStatus(e,"online")}}},[t._v("发布")]):t._e(),t._v(" "),"online"==e.status?a("a",{staticClass:"tool-btn-downline",on:{click:function(a){t.doChangeStatus(e,"downline")}}},[t._v("下线")]):t._e()])])})):t._e(),t._v(" "),0==t.dataList.length?a("tbody",{staticClass:"data-table-null-data"},[t._m(1)]):t._e()])])],1),t._v(" "),a("Pagination",{attrs:{curr:t.page,total:t.totalPage},on:{switch:t.doSwitchPage}}),t._v(" "),a("Modal",{staticClass:"add-modal",attrs:{title:"添加","is-show":t.isShowAddModal,tip:t.addModalCommitTip},on:{"update:isShow":function(e){t.isShowAddModal=e},"update:tip":function(e){t.addModalCommitTip=e},commit:function(e){t.doAddModalCommit()}}},[a("div",{staticClass:"modal-form form"},[a("div",{staticClass:"form-item"},[a("label",[t._v("文章名：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addForm.title,expression:"addForm.title"}],ref:"titleInput",attrs:{type:"text",placeholder:"请输入文章名",maxlength:"150"},domProps:{value:t.addForm.title},on:{input:function(e){e.target.composing||t.$set(t.addForm,"title",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-item"},[a("label",[t._v("类型：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addForm.type,expression:"addForm.type"}],ref:"typeInput",attrs:{type:"text",placeholder:"请输入文章类型",maxlength:"15"},domProps:{value:t.addForm.type},on:{input:function(e){e.target.composing||t.$set(t.addForm,"type",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-item"},[a("label",[t._v("类别：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addForm.category,expression:"addForm.category"}],ref:"categoryInput",attrs:{type:"text",placeholder:"请输入文章类别",maxlength:"15"},domProps:{value:t.addForm.category},on:{input:function(e){e.target.composing||t.$set(t.addForm,"category",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-item"},[a("label",[t._v("描述：")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.addForm.description,expression:"addForm.description"}],ref:"descriptionInput",attrs:{type:"text",placeholder:"请输入文章描述",maxlength:"150"},domProps:{value:t.addForm.description},on:{input:function(e){e.target.composing||t.$set(t.addForm,"description",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-item"},[a("label",[t._v("时间：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addForm.date,expression:"addForm.date"}],ref:"dateInput",attrs:{type:"text",placeholder:"请输入添加时间",maxlength:"150"},domProps:{value:t.addForm.date},on:{input:function(e){e.target.composing||t.$set(t.addForm,"date",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-item"},[a("label",[t._v("路由名：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addForm.routerName,expression:"addForm.routerName"}],ref:"routerNameInput",attrs:{type:"text",placeholder:"请输入文章路由",maxlength:"150"},domProps:{value:t.addForm.routerName},on:{input:function(e){e.target.composing||t.$set(t.addForm,"routerName",e.target.value)}}})])])]),t._v(" "),a("Modal",{attrs:{title:"账号删除确认","is-show":t.isShowDelConfirmModal,"is-show-close-btn":!1},on:{"update:isShow":function(e){t.isShowDelConfirmModal=e},commit:t.doCommitDel}},[a("div",{staticClass:"modal-confirm"},[t._v("确认要删除名称为“"),a("strong",[t._v(t._s(t.delTitle))]),t._v("”的文章？")])])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticStyle:{width:"5%"}},[t._v("序号")]),t._v(" "),a("th",{staticStyle:{width:"14%"}},[t._v("文章名")]),t._v(" "),a("th",{staticStyle:{width:"7%"}},[t._v("类型")]),t._v(" "),a("th",{staticStyle:{width:"7%"}},[t._v("类别")]),t._v(" "),a("th",{staticStyle:{width:"25%"}},[t._v("描述")]),t._v(" "),a("th",{staticStyle:{width:"10%"}},[t._v("添加时间")]),t._v(" "),a("th",{staticStyle:{width:"9%"}},[t._v("路由")]),t._v(" "),a("th",{staticStyle:{width:"6%"}},[t._v("状态")]),t._v(" "),a("th",{staticStyle:{width:"10%"}},[t._v("操作")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{attrs:{colspan:"9"}})])}]};var v=a("U5Ua")(u,p,!1,function(t){a("VQUg")},null,null);e.default=v.exports},mtQr:function(t,e,a){var i=a("NBnH");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("P+mm")("277cdcac",i,!0,{})}});