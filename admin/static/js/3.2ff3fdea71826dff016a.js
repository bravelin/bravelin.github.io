webpackJsonp([3],{lmfZ:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("Vo7i"),s=i("5reh"),o=i("y0YP"),a=function(e,t,i,n,s){var o,a,l;this.ctx=i,this.ctx2=n,this.canvas2=s,this.orbitRadius=r((o=e,a=t,l=Math.max(o,a),Math.round(Math.sqrt(l*l+l*l))/2)),this.radius=r(60,this.orbitRadius)/12,this.orbitX=e/2,this.orbitY=t/2,this.timePassed=r(0,1e3),this.speed=r(this.orbitRadius)/6e5,this.alpha=r(2,10)/10};function r(e,t){if(arguments.length<2&&(t=e,e=0),e>t){var i=t;t=e,e=i}return Math.floor(Math.random()*(t-e+1))+e}a.prototype.draw=function(){var e=Math.sin(this.timePassed)*this.orbitRadius+this.orbitX,t=Math.cos(this.timePassed)*this.orbitRadius+this.orbitY,i=r(10);1===i&&this.alpha>0?this.alpha-=.05:2===i&&this.alpha<1&&(this.alpha+=.05),this.ctx.globalAlpha=this.alpha,this.ctx.drawImage(this.canvas2,e-this.radius/2,t-this.radius/2,this.radius,this.radius),this.timePassed+=this.speed};var l=a,d=window,c={data:function(){return{stars:[],ctx:null,hue:0,w:0,h:0,requestId:null}},created:function(){d.requestAnimationFrame=d.requestAnimationFrame||d.webkitRequestAnimationFrame||d.mozRequestAnimationFrame||d.msRequestAnimationFrame,d.cancelAnimationFrame=d.cancelAnimationFrame||d.webkitCancelAnimationFrame||d.mozCancelAnimationFrame||d.msCancelAnimationFrame},mounted:function(){var e=this;e.$nextTick(function(){var t=e.$el;e.ctx=t.getContext("2d"),e.draw()}),d.addEventListener("resize",e.doResize)},methods:{doResize:function(){this.requestId&&d.cancelAnimationFrame(this.requestId),this.ctx.clearRect(0,0,this.w,this.h),this.draw()},draw:function(){var e=this.$el,t=this.ctx,i=this.w=e.width=window.innerWidth,n=this.h=e.height=window.innerHeight,s=this.hue=217,o=document.createElement("canvas"),a=o.getContext("2d");o.width=100,o.height=100;var r=o.width/2,d=a.createRadialGradient(r,r,0,r,r,r);d.addColorStop(.025,"#fff"),d.addColorStop(.1,"hsl("+s+", 61%, 33%)"),d.addColorStop(.25,"hsl("+s+", 64%, 6%)"),d.addColorStop(1,"transparent"),a.fillStyle=d,a.beginPath(),a.arc(r,r,r,0,2*Math.PI),a.fill(),this.stars=[];for(var c=0;c<1e3;c++)this.stars.push(new l(i,n,t,a,o));this.animation()},animation:function(){var e=this.ctx;e.globalCompositeOperation="source-over",e.globalAlpha=.8,e.fillStyle="hsla("+this.hue+", 64%, 6%, 1)",e.fillRect(0,0,this.w,this.h),e.globalCompositeOperation="lighter";for(var t=1,i=this.stars.length;t<i;t++)this.stars[t].draw();this.requestId=d.requestAnimationFrame(this.animation)}},beforeDestroy:function(){this.requestId&&d.cancelAnimationFrame(this.requestId),window.removeEventListener("onresize",this.doResize)}},p={render:function(){var e=this.$createElement;return(this._self._c||e)("canvas",{staticClass:"sky-bg"})},staticRenderFns:[]},h={name:"login-page",components:{Sky:i("U5Ua")(c,p,!1,null,null,null).exports},data:function(){return{isDialogActive:!1,isSuccess:!1,isShowTip:!1,tipStr:"",isRemember:!0,isProcessing:!1,userName:"",password:""}},created:function(){var e=localStorage;this.userName=e.getItem("lin-website-un"),this.password=e.getItem("lin-website-pw"),this.isRemember=!0,document.body.addEventListener("keypress",this.doPresskey),Object(o.a)(!1)},mounted:function(){var e=this;e.$nextTick(function(){var t=e.$store.state;if(t.userToken&&t.role)e.toPage(t.role);else{var i=e.userName=e.userName,n=e.password=e.password,s=e.$refs;setTimeout(function(){e.isDialogActive=!0,s.pw.value=e.password=n,s.un.value=e.userName=i,i?n||s.pw.focus():s.un.focus()},500)}})},methods:{doClickRememberBtn:function(){this.isProcessing||(this.isRemember=!this.isRemember)},showTip:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this;i.tipStr=e,i.isSuccess=t,i.isShowTip=!0,setTimeout(function(){i.isShowTip=!1},1500)},doLogin:function(){var e=this,t=e.$refs;if(!e.isProcessing){if(e.userName=e.userName.trim(),!e.userName)return t.un.focus(),e.showTip("请输入用户名！");if(!e.password)return t.pw.focus(),e.showTip("请输入密码！");var i=localStorage;e.isRemember?(i.setItem("lin-website-un",e.userName),i.setItem("lin-website-pw",e.password),i.setItem("lin-website-is-remember","1")):(i.removeItem("lin-website-un"),i.removeItem("lin-website-pw"),i.removeItem("lin-website-is-remember")),e.isProcessing=!0,Object(n.a)({url:"https://d.apicloud.com/mcm/api/user/login",method:"post",data:{username:e.userName,password:e.password}}).then(function(t){if(t.id){var i=e.$store;i.commit(s.a.SET_USER_INFO,{userToken:t.id,userId:t.userId}),e.showTip("登录成功！",!0),e.$router.push({name:"articles"}),i.dispatch(s.a.GET_USER_INFO),i.dispatch(s.a.GET_MENU_DATA)}else e.isProcessing=!1,e.showTip("用户名或密码错误！",!1)},function(){e.isProcessing=!1,e.showTip("用户名或密码错误！",!1)})}},doPresskey:function(e){13==e.keyCode&&this.doLogin()}},beforeDestroy:function(){document.body.removeEventListener("keypress",this.doPresskey)}},m={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"login-page"}},[i("Sky"),e._v(" "),i("div",{staticClass:"dialog",class:{active:e.isDialogActive}},[e._m(0),e._v(" "),i("div",{staticClass:"form"},[i("h1",[e._v("Lin's Notes Login")]),e._v(" "),i("div",{staticClass:"person"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.userName,expression:"userName"}],ref:"un",attrs:{type:"text",tabindex:"1",disabled:e.isProcessing,placeholder:"请输入用户名",maxlength:"45",autocomplete:"off"},domProps:{value:e.userName},on:{input:function(t){t.target.composing||(e.userName=t.target.value)}}})]),e._v(" "),i("div",{staticClass:"lock"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],ref:"pw",attrs:{type:"password",tabindex:"2",disabled:e.isProcessing,placeholder:"请输入密码",maxlength:"45",autocomplete:"off"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),i("div",{staticClass:"btn",class:{active:e.userName&&e.password,processing:e.isProcessing},attrs:{tabindex:"3"},on:{click:function(t){e.doLogin()}}},[e._v(e._s(e.isProcessing?"正在登录...":"立即登录"))])]),e._v(" "),i("div",{staticClass:"info",class:{active:e.isShowTip,success:e.isSuccess}},[e._v(e._s(e.tipStr))])]),e._v(" "),i("footer",[e._v("© 2018 zhangjialin")])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"descri"},[t("div")])}]};var u=i("U5Ua")(h,m,!1,function(e){i("tvuW")},null,null);t.default=u.exports},"shq+":function(e,t,i){(e.exports=i("D/Sv")(!1)).push([e.i,"\n#login-page {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: end;\n      -ms-flex-pack: end;\n          justify-content: flex-end;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  background-size: 100% 100%;\n  overflow: hidden !important;\n  padding: 0 !important;\n}\n#login-page .dialog {\n    position: relative;\n    width: 500px;\n    height: 400px;\n    z-index: 2;\n    margin-right: 10%;\n    background: rgba(55, 50, 119, 0.5);\n    background-size: 100% 100%;\n    -webkit-box-shadow: 0 0 20px 5px rgba(0, 0, 0, 0.3);\n            box-shadow: 0 0 20px 5px rgba(0, 0, 0, 0.3);\n    -webkit-transition: all 0.8s ease-out;\n    transition: all 0.8s ease-out;\n    opacity: 0;\n    -webkit-transform: translateY(200px);\n            transform: translateY(200px);\n    border: 2px solid #f0f0f0;\n    border-radius: 10px;\n}\n#login-page .dialog.active {\n      opacity: 1;\n      -webkit-transform: translateY(0px);\n              transform: translateY(0px);\n}\n#login-page .dialog > .form {\n      display: block;\n      height: 100%;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-pack: center;\n          -ms-flex-pack: center;\n              justify-content: center;\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n      -webkit-box-orient: vertical;\n      -webkit-box-direction: normal;\n          -ms-flex-direction: column;\n              flex-direction: column;\n}\n#login-page .dialog > .form > h1 {\n        color: #f0f0f0;\n        font-size: 34px;\n        letter-spacing: 2px;\n        font-weight: bold;\n        margin-bottom: 35px;\n}\n#login-page .dialog > .form > div.lock > input,\n      #login-page .dialog > .form > div.person > input {\n        width: 390px;\n        height: 48px;\n        line-height: 48px;\n        padding: 0 33px;\n        -webkit-box-sizing: border-box;\n                box-sizing: border-box;\n        background-color: #f8f4f4;\n        font-size: 15px;\n        color: #4d4d4d;\n        font-weight: bold;\n        border-radius: 26px;\n}\n#login-page .dialog > .form > div.lock {\n        margin-top: 20px;\n}\n#login-page .dialog > .form > input.btn,\n      #login-page .dialog > .form > div.btn {\n        display: block;\n        height: 52px;\n        width: 392px;\n        font-size: 16px;\n        border-radius: 30px;\n        text-align: center;\n        line-height: 52px;\n        color: #fff;\n        background: -webkit-gradient(linear, left top, right top, from(#6f69c0), to(#262353));\n        background: linear-gradient(to right, #6f69c0, #262353);\n        letter-spacing: 2px;\n        cursor: pointer;\n        outline: none;\n        margin-top: 30px;\n}\n#login-page .sky-bg {\n    position: absolute;\n    z-index: 0;\n}\n#login-page div.info {\n    opacity: 0;\n    -webkit-transform: translateY(-5px);\n            transform: translateY(-5px);\n    position: absolute;\n    color: #ff6666;\n    font-size: 15px;\n    bottom: 10px;\n    left: 50px;\n    -webkit-transition: all 0.3s;\n    transition: all 0.3s;\n}\n#login-page div.info.active {\n      opacity: 1;\n      -webkit-transform: translateY(0);\n              transform: translateY(0);\n}\n#login-page footer {\n    display: block;\n    position: absolute;\n    width: 100%;\n    bottom: 20px;\n    text-align: center;\n    font-size: 14px;\n    color: #f9f9f9;\n}\n",""])},tvuW:function(e,t,i){var n=i("shq+");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i("P+mm")("4d7067b7",n,!0,{})}});