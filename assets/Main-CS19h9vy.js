import{_ as i,s as a,x as r,h as l,o as p,f as e,y as g}from"./index-CxcENImR.js";const n={};function c(o,t){const s=l("MyArticle");return p(),a(s,{title:"GeoServer设置图层的访问控制权限",date:"2025年08月14日"},{default:r(()=>[...t[0]||(t[0]=[e("div",{class:"_article-content"},[e("p",null,"GeoServer的AuthKey模块提供了一种简单的身份验证机制，适用于无法处理复杂安全协议的OGC客户端。通过在URL中附加唯一密钥，AuthKey模块允许最小形式的身份验证。"),e("p",null,"经过身份验证的请求示例如下："),e("pre",null,[e("code",null,"http://192.168.110.88:8080/geoserver/gwc/service/tms/1.0.0/yrsz%3Ajxsxj@EPSG%3A900913@png/9/417/295.png?authkey=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiaWF0IjoxNzU1NDg2NjQyLCJleHAiOjE3NTU1Mjk4NDJ9.s9n-AcD54rTB-lFyUJYXuKAcoqp8SOI-nkccCk_hxgo")]),e("p",null,[g("AuthKey官方文档地址："),e("a",{target:"_blank",href:"https://docs.geoserver.org/stable/en/user/extensions/authkey/index.html"},"https://docs.geoserver.org/stable/en/user/extensions/authkey/index.html")]),e("p",null,"下载相应版本的Key authentication插件，比如2.27.2版本地址如下："),e("pre",null,[e("code",null,"https://geoserver.org/release/2.27.2/")]),e("p",null,"在上面的页面中找到Extensions-Security："),e("figure",{class:"common"},[e("a",{class:"pswp-img",href:"https://gitee.com/bravelin/pics/raw/master/gis/geoServerTileVisitSetting/01.webp","data-pswp-width":"1920","data-pswp-height":"986",target:"_blank"},[e("img",{class:"thumbnail-img",src:"https://gitee.com/bravelin/pics/raw/master/gis/geoServerTileVisitSetting/01.webp"})])]),e("p",null,"解压下载的文件，里面的jar包全部复制到/webapps/geoserver/WEB-INF/lib文件夹中，然后重启GeoServer服务。"),e("p",null,"依据authkey的来源，有以下三种认证方式。"),e("h3",{class:"title"},"一、Property File"),e("p",null,"authkey在文件中定义，找到以下文件："),e("pre",null,[e("code",null,"$GEOSERVER_DATA_DIR/security/usergroup/default/authkeys.properties")]),e("p",null,"该文件包含以下类似内容："),e("pre",null,[e("code",null,`# Format is authkey=username
b52d2068-0a9b-45d7-aacc-144d16322018=admin`)]),e("p",null,"每一行的authkey即对应该账号的访问密钥。"),e("p",null,"设置步骤如下："),e("p",null,"1、在“安全”模块下点击“认证”，然后在“身份验证筛选器”下点“新增”按钮："),e("figure",{class:"common"},[e("a",{class:"pswp-img",href:"https://gitee.com/bravelin/pics/raw/master/gis/geoServerTileVisitSetting/01.webp","data-pswp-width":"1920","data-pswp-height":"986",target:"_blank"},[e("img",{class:"thumbnail-img",src:"https://gitee.com/bravelin/pics/raw/master/gis/geoServerTileVisitSetting/01.webp"})])]),e("p",null,"在“新验证过滤器”页面点击“AuthKey”，输入验证过滤器命名、选择Authentication Key to user mapper为“Property file”，之后点击保存："),e("figure",{class:"common"},[e("a",{class:"pswp-img",href:"https://gitee.com/bravelin/pics/raw/master/gis/geoServerTileVisitSetting/03.webp","data-pswp-width":"1920","data-pswp-height":"988",target:"_blank"},[e("img",{class:"thumbnail-img",src:"https://gitee.com/bravelin/pics/raw/master/gis/geoServerTileVisitSetting/03.webp"})])]),e("p",null,"2、回到“安全”模块下“认证”页面，“过滤器链”点击default："),e("figure",{class:"common"},[e("a",{class:"pswp-img",href:"https://gitee.com/bravelin/pics/raw/master/gis/geoServerTileVisitSetting/07.webp","data-pswp-width":"1920","data-pswp-height":"945",target:"_blank"},[e("img",{class:"thumbnail-img",src:"https://gitee.com/bravelin/pics/raw/master/gis/geoServerTileVisitSetting/07.webp"})])]),e("p",null,"将上面设置的身份验证器移动到anonymous前面："),e("figure",{class:"common"},[e("a",{class:"pswp-img",href:"https://gitee.com/bravelin/pics/raw/master/gis/geoServerTileVisitSetting/08.webp","data-pswp-width":"1920","data-pswp-height":"1080",target:"_blank"},[e("img",{class:"thumbnail-img",src:"https://gitee.com/bravelin/pics/raw/master/gis/geoServerTileVisitSetting/08.webp"})])]),e("p",null,"3、再次回到“安全”模块下“认证”页面，“过滤器链”点击“添加服务链”："),e("figure",{class:"common"},[e("a",{class:"pswp-img",href:"https://gitee.com/bravelin/pics/raw/master/gis/geoServerTileVisitSetting/04.webp","data-pswp-width":"1920","data-pswp-height":"945",target:"_blank"},[e("img",{class:"thumbnail-img",src:"https://gitee.com/bravelin/pics/raw/master/gis/geoServerTileVisitSetting/04.webp"})])]),e("p",null,"在打开的页面中设置链名称，路径填写/gwc/**，链过滤器选择上一步骤设置的名称："),e("figure",{class:"common"},[e("a",{class:"pswp-img",href:"https://gitee.com/bravelin/pics/raw/master/gis/geoServerTileVisitSetting/05.webp","data-pswp-width":"1920","data-pswp-height":"1080",target:"_blank"},[e("img",{class:"thumbnail-img",src:"https://gitee.com/bravelin/pics/raw/master/gis/geoServerTileVisitSetting/05.webp"})])]),e("p",null,"设置完点“关闭”按钮，在返回的页面点击“保存”。"),e("p",null,"4、调整过滤器链位置，通过点击上下箭头，将刚才设置的服务链移动到default上面："),e("figure",{class:"common"},[e("a",{class:"pswp-img",href:"https://gitee.com/bravelin/pics/raw/master/gis/geoServerTileVisitSetting/06.webp","data-pswp-width":"1920","data-pswp-height":"945",target:"_blank"},[e("img",{class:"thumbnail-img",src:"https://gitee.com/bravelin/pics/raw/master/gis/geoServerTileVisitSetting/06.webp"})])]),e("h3",{class:"title"},"二、User Property"),e("h3",{class:"title"},"三、Web Service")],-1)])]),_:1})}const h=i(n,[["render",c]]);export{h as default};
